<!doctype html>














<!-- `site.alt_lang` can specify a language different from the UI -->
<html lang="es" >
  <head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7">
  <meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta
    name="viewport"
    content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover"
  ><!-- Setup Open Graph image -->

  

  <!-- Begin Jekyll SEO tag v2.8.0 -->
<meta name="generator" content="Jekyll v4.3.4" />
<meta property="og:title" content="Certificados digitales. HTTPS" />
<meta name="author" content="Pablo Mart√≠n Hidalgo" />
<meta property="og:locale" content="es" />
<meta name="description" content="En esta pr√°ctica vamos a trabajar con certificados digitales para autenticarnos, firmar documentos y securizar una p√°gina web con HTTPS. Primero, instalaremos un certificado digital de persona f√≠sica en nuestro navegador y aprenderemos a hacer copias de seguridad. Luego, validaremos el certificado con Autofirma y la plataforma VALIDe. Tambi√©n utilizaremos nuestra firma digital para firmar y verificar documentos. Finalmente, configuraremos un servidor web con Apache y Nginx usando certificados autofirmados, aprendiendo a generar claves privadas, CSR y certificados X.509 con nuestra propia Autoridad Certificadora. üîí‚úÖ" />
<meta property="og:description" content="En esta pr√°ctica vamos a trabajar con certificados digitales para autenticarnos, firmar documentos y securizar una p√°gina web con HTTPS. Primero, instalaremos un certificado digital de persona f√≠sica en nuestro navegador y aprenderemos a hacer copias de seguridad. Luego, validaremos el certificado con Autofirma y la plataforma VALIDe. Tambi√©n utilizaremos nuestra firma digital para firmar y verificar documentos. Finalmente, configuraremos un servidor web con Apache y Nginx usando certificados autofirmados, aprendiendo a generar claves privadas, CSR y certificados X.509 con nuestra propia Autoridad Certificadora. üîí‚úÖ" />
<link rel="canonical" href="/posts/certificado/" />
<meta property="og:url" content="/posts/certificado/" />
<meta property="og:site_name" content="Blog personal" />
<meta property="og:image" content="/assets/img/posts/certificado/portada.png" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2024-12-19T18:30:00+01:00" />
<meta name="twitter:card" content="summary_large_image" />
<meta property="twitter:image" content="/assets/img/posts/certificado/portada.png" />
<meta property="twitter:title" content="Certificados digitales. HTTPS" />
<meta name="twitter:site" content="@Tagarnina10" />
<meta name="twitter:creator" content="@Tagarnina10" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Pablo Mart√≠n Hidalgo","url":"https://github.com/PabloMartin19/"},"dateModified":"2025-01-17T08:22:46+01:00","datePublished":"2024-12-19T18:30:00+01:00","description":"En esta pr√°ctica vamos a trabajar con certificados digitales para autenticarnos, firmar documentos y securizar una p√°gina web con HTTPS. Primero, instalaremos un certificado digital de persona f√≠sica en nuestro navegador y aprenderemos a hacer copias de seguridad. Luego, validaremos el certificado con Autofirma y la plataforma VALIDe. Tambi√©n utilizaremos nuestra firma digital para firmar y verificar documentos. Finalmente, configuraremos un servidor web con Apache y Nginx usando certificados autofirmados, aprendiendo a generar claves privadas, CSR y certificados X.509 con nuestra propia Autoridad Certificadora. üîí‚úÖ","headline":"Certificados digitales. HTTPS","image":"/assets/img/posts/certificado/portada.png","mainEntityOfPage":{"@type":"WebPage","@id":"/posts/certificado/"},"url":"/posts/certificado/"}</script>
<!-- End Jekyll SEO tag -->


  <title>Certificados digitales. HTTPS | Blog personal
  </title>

  <!--
  The Favicons for Web, Android, Microsoft, and iOS (iPhone and iPad) Apps
  Generated by: https://realfavicongenerator.net/
-->



<link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png">

  <link rel="manifest" href="/assets/img/favicons/site.webmanifest">

<link rel="shortcut icon" href="/assets/img/favicons/favicon.ico">
<meta name="apple-mobile-web-app-title" content="Blog personal">
<meta name="application-name" content="Blog personal">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml">
<meta name="theme-color" content="#ffffff">


  <!-- Resource Hints -->
  
    
      
        <link rel="preconnect" href="https://fonts.googleapis.com" >
      
        <link rel="dns-prefetch" href="https://fonts.googleapis.com" >
      
    
      
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
      
        <link rel="dns-prefetch" href="https://fonts.gstatic.com" >
      
    
      
        <link rel="preconnect" href="https://cdn.jsdelivr.net" >
      
        <link rel="dns-prefetch" href="https://cdn.jsdelivr.net" >
      
    
  

  <!-- Bootstrap -->
  
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
  

  <!-- Theme style -->
  <link rel="stylesheet" href="/assets/css/jekyll-theme-chirpy.css">

  <!-- Web Font -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400&family=Source+Sans+Pro:wght@400;600;700;900&display=swap">

  <!-- Font Awesome Icons -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.6.0/css/all.min.css">

  <!-- 3rd-party Dependencies -->

  
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.29.0/dist/tocbot.min.css">
  

  
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.min.css">
  

  
    <!-- Image Popup -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/glightbox@3.3.0/dist/css/glightbox.min.css">
  

  <!-- JavaScript -->

  
    <!-- Switch the mode between dark and light. -->

<script type="text/javascript">
  class ModeToggle {
    static get MODE_KEY() {
      return 'mode';
    }
    static get MODE_ATTR() {
      return 'data-mode';
    }
    static get DARK_MODE() {
      return 'dark';
    }
    static get LIGHT_MODE() {
      return 'light';
    }
    static get ID() {
      return 'mode-toggle';
    }

    constructor() {
      let self = this;this.sysDarkPrefers.addEventListener('change', () => {
        if (self.hasMode) {
          self.clearMode();
        }
        self.notify();
      });

      if (!this.hasMode) {
        return;
      }

      if (this.isDarkMode) {
        this.setDark();
      } else {
        this.setLight();
      }
    }

    get sysDarkPrefers() {
      return window.matchMedia('(prefers-color-scheme: dark)');
    }

    get isPreferDark() {
      return this.sysDarkPrefers.matches;
    }

    get isDarkMode() {
      return this.mode === ModeToggle.DARK_MODE;
    }

    get hasMode() {
      return this.mode != null;
    }

    get mode() {
      return sessionStorage.getItem(ModeToggle.MODE_KEY);
    }get modeStatus() {
      if (this.hasMode) {
        return this.mode;
      } else {
        return this.isPreferDark ? ModeToggle.DARK_MODE : ModeToggle.LIGHT_MODE;
      }
    }

    setDark() {
      document.documentElement.setAttribute(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE);
      sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE);
    }

    setLight() {
      document.documentElement.setAttribute(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE);
      sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE);
    }

    clearMode() {
      document.documentElement.removeAttribute(ModeToggle.MODE_ATTR);
      sessionStorage.removeItem(ModeToggle.MODE_KEY);
    }notify() {
      window.postMessage(
        {
          direction: ModeToggle.ID,
          message: this.modeStatus
        },
        '*'
      );
    }

    flipMode() {
      if (this.hasMode) {
        this.clearMode();
      } else {
        if (this.isPreferDark) {
          this.setLight();
        } else {
          this.setDark();
        }
      }

      this.notify();
    }
  }

  const modeToggle = new ModeToggle();
</script>

  

  <!-- A placeholder to allow defining custom metadata -->

</head>


  <body>
    <!-- The Side Bar -->

<aside aria-label="Sidebar" id="sidebar" class="d-flex flex-column align-items-end">
  <header class="profile-wrapper">
    <a href="/" id="avatar" class="rounded-circle"><img src="/assets/img/avatar.png" width="112" height="112" alt="avatar" onerror="this.style.display='none'"></a>

    <a class="site-title d-block" href="/">Blog personal</a>
    <p class="site-subtitle fst-italic mb-0">Los mejores programas son aquellos que funcionan.</p>
  </header>
  <!-- .profile-wrapper -->

  <nav class="flex-column flex-grow-1 w-100 ps-0">
    <ul class="nav">
      <!-- home -->
      <li class="nav-item">
        <a href="/" class="nav-link">
          <i class="fa-fw fas fa-home"></i>
          <span>HOME</span>
        </a>
      </li>
      <!-- the real tabs -->
      
        <li class="nav-item">
          <a href="/categories/" class="nav-link">
            <i class="fa-fw fas fa-stream"></i>
            

            <span>CATEGORIES</span>
          </a>
        </li>
        <!-- .nav-item -->
      
        <li class="nav-item">
          <a href="/tags/" class="nav-link">
            <i class="fa-fw fas fa-tags"></i>
            

            <span>TAGS</span>
          </a>
        </li>
        <!-- .nav-item -->
      
        <li class="nav-item">
          <a href="/archives/" class="nav-link">
            <i class="fa-fw fas fa-archive"></i>
            

            <span>ARCHIVES</span>
          </a>
        </li>
        <!-- .nav-item -->
      
        <li class="nav-item">
          <a href="/about/" class="nav-link">
            <i class="fa-fw fas fa-info-circle"></i>
            

            <span>ABOUT</span>
          </a>
        </li>
        <!-- .nav-item -->
      
    </ul>
  </nav>

  <div class="sidebar-bottom d-flex flex-wrap  align-items-center w-100">
    
      <button type="button" class="btn btn-link nav-link" aria-label="Switch Mode" id="mode-toggle">
        <i class="fas fa-adjust"></i>
      </button>

      
        <span class="icon-border"></span>
      
    

    
      

      
        <a
          href="https://github.com/PabloMartin19"
          aria-label="github"
          

          
            target="_blank"
            
          

          

          
            rel="noopener noreferrer"
          
        >
          <i class="fab fa-github"></i>
        </a>
      
    
      

      
        <a
          href="https://twitter.com/Tagarnina10"
          aria-label="twitter"
          

          
            target="_blank"
            
          

          

          
            rel="noopener noreferrer"
          
        >
          <i class="fa-brands fa-x-twitter"></i>
        </a>
      
    
      

      
        <a
          href="javascript:location.href = 'mailto:' + ['pmartinhidalgo19','gmail.com'].join('@')"
          aria-label="email"
          

          

          

          
        >
          <i class="fas fa-envelope"></i>
        </a>
      
    
      

      
        <a
          href="https://www.linkedin.com/in/pablo-mart%C3%ADn-hidalgo/"
          aria-label="linkedin"
          

          
            target="_blank"
            
          

          

          
            rel="noopener noreferrer"
          
        >
          <i class="fab fa-linkedin"></i>
        </a>
      
    
  </div>
  <!-- .sidebar-bottom -->
</aside>
<!-- #sidebar -->


    <div id="main-wrapper" class="d-flex justify-content-center">
      <div class="container d-flex flex-column px-xxl-5">
        <!-- The Top Bar -->

<header id="topbar-wrapper" aria-label="Top Bar">
  <div
    id="topbar"
    class="d-flex align-items-center justify-content-between px-lg-3 h-100"
  >
    <nav id="breadcrumb" aria-label="Breadcrumb">
      

      
        
          
            <span>
              <a href="/">Home</a>
            </span>

          
        
          
        
          
            
              <span>Certificados digitales. HTTPS</span>
            

          
        
      
    </nav>
    <!-- endof #breadcrumb -->

    <button type="button" id="sidebar-trigger" class="btn btn-link">
      <i class="fas fa-bars fa-fw"></i>
    </button>

    <div id="topbar-title">
      Post
    </div>

    <button type="button" id="search-trigger" class="btn btn-link">
      <i class="fas fa-search fa-fw"></i>
    </button>

    <search id="search" class="align-items-center ms-3 ms-lg-0">
      <i class="fas fa-search fa-fw"></i>
      <input
        class="form-control"
        id="search-input"
        type="search"
        aria-label="search"
        autocomplete="off"
        placeholder="Search..."
      >
    </search>
    <button type="button" class="btn btn-link text-decoration-none" id="search-cancel">Cancel</button>
  </div>
</header>


        <div class="row flex-grow-1">
          <main aria-label="Main Content" class="col-12 col-lg-11 col-xl-9 px-md-4">
            
              <!-- Refactor the HTML structure -->



<!--
  In order to allow a wide table to scroll horizontally,
  we suround the markdown table with `<div class="table-wrapper">` and `</div>`
-->



<!--
  Fixed kramdown code highlight rendering:
  https://github.com/penibelst/jekyll-compress-html/issues/101
  https://github.com/penibelst/jekyll-compress-html/issues/71#issuecomment-188144901
-->



<!-- Change the icon of checkbox -->



<!-- Handle images -->




  
  

  
    
      
      
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    
      

      
      
      

      
    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  

  


<!-- Add header for code snippets -->



<!-- Create heading anchors -->





  
  

  
    
    

    
      
        
        
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    

    
  

  
  

  
    
    

    
      
        
        
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    

    
  

  
  

  

  
  

  




<!-- return -->




<article class="px-1">
  <header>
    <h1 data-toc-skip>Certificados digitales. HTTPS</h1>
    
      <p class="post-desc fw-light mb-4">En esta pr√°ctica vamos a trabajar con certificados digitales para autenticarnos, firmar documentos y securizar una p√°gina web con HTTPS. Primero, instalaremos un certificado digital de persona f√≠sica en nuestro navegador y aprenderemos a hacer copias de seguridad. Luego, validaremos el certificado con Autofirma y la plataforma VALIDe. Tambi√©n utilizaremos nuestra firma digital para firmar y verificar documentos. Finalmente, configuraremos un servidor web con Apache y Nginx usando certificados autofirmados, aprendiendo a generar claves privadas, CSR y certificados X.509 con nuestra propia Autoridad Certificadora. üîí‚úÖ</p>
    

    <div class="post-meta text-muted">
      <!-- published date -->
      <span>
        Posted
        <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->




<time
  
  data-ts="1734629400"
  data-df="ll"
  
    data-bs-toggle="tooltip" data-bs-placement="bottom"
  
>
  Dec 19, 2024
</time>

      </span>

      <!-- lastmod date -->
      
        <span>
          Updated
          <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->




<time
  
  data-ts="1737098566"
  data-df="ll"
  
    data-bs-toggle="tooltip" data-bs-placement="bottom"
  
>
  Jan 17, 2025
</time>

        </span>
      

      
        
        
        

        

        <div class="mt-3 mb-3">
          <a href="/assets/img/posts/certificado/portada.png" class="popup img-link preview-img shimmer"><img src="/assets/img/posts/certificado/portada.png"  alt="Preview Image" width="1200" height="630"  loading="lazy"></a></div>
      

      <div class="d-flex justify-content-between">
        <!-- author(s) -->
        <span>
          

          By

          <em>
            
              
                <a href="https://github.com/PabloMartin19/">Pablo Mart√≠n Hidalgo</a>
                
              
            
          </em>
        </span>

        <div>
          <!-- pageviews -->
          

          <!-- read time -->
          <!-- Calculate the post's reading time, and display the word count in tooltip -->



<!-- words per minute -->










<!-- return element -->
<span
  class="readtime"
  data-bs-toggle="tooltip"
  data-bs-placement="bottom"
  title="4754 words"
>
  <em>26 min</em> read</span>

        </div>
      </div>
    </div>
  </header>

  <div class="content">
    <h2 id="certificado-digital-de-persona-f√≠sica"><span class="me-2">Certificado digital de persona f√≠sica</span><a href="#certificado-digital-de-persona-f√≠sica" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<h2 id="tarea-1-instalaci√≥n-del-certificado"><span class="me-2">Tarea 1: Instalaci√≥n del certificado</span><a href="#tarea-1-instalaci√≥n-del-certificado" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<h3 id="1-una-vez-que-hayas-obtenido-tu-certificado-explica-brevemente-como-se-instala-en-tu-navegador-favorito"><span class="me-2">1. Una vez que hayas obtenido tu certificado, explica brevemente como se instala en tu navegador favorito.</span><a href="#1-una-vez-que-hayas-obtenido-tu-certificado-explica-brevemente-como-se-instala-en-tu-navegador-favorito" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>Para la instalaci√≥n del certificado digital en mi navegador (Firefox), debemos dirigirnos al correo que nos manda la F√°brica Nacional de Moneda y Timbre al realizar la solicitud:</p>

<p><a href="/assets/img/posts/certificado/paso1.png" class="popup img-link  shimmer"><img src="/assets/img/posts/certificado/paso1.png" alt="image" loading="lazy"></a></p>

<p>Pinchamos en el enlace de descarga he introducimos los datos para continuar con la descarga:</p>

<p><a href="/assets/img/posts/certificado/paso2.png" class="popup img-link  shimmer"><img src="/assets/img/posts/certificado/paso2.png" alt="image" loading="lazy"></a></p>

<p>Una vez que hayamos descargado el certificado digital desde la FNMT, normalmente estar√° en formato <code class="language-plaintext highlighter-rouge">.p12</code>. Este archivo contiene tanto la clave p√∫blica como la clave privada del certificado.</p>

<p>Por lo que para la instalaci√≥n:</p>

<ol>
  <li>
    <p>Abrimos Firefox y nos dirigimos al men√∫ principal (√≠cono de tres l√≠neas horizontales).</p>
  </li>
  <li>
    <p>Hacemos clic en Ajustes y luego seleccionamos la secci√≥n <strong>Privacidad &amp; Seguridad</strong>.</p>
  </li>
  <li>
    <p>Nos desplazamos hasta la opci√≥n <strong>Certificados</strong> y pulsamos el bot√≥n <strong>Ver Certificados</strong>.</p>
  </li>
  <li>
    <p>En la pesta√±a <strong>Sus Certificados</strong>, seleccionamos <strong>Importar‚Ä¶</strong> y buscamos el archivo <code class="language-plaintext highlighter-rouge">.p12</code>.</p>
  </li>
  <li>
    <p>Durante la importaci√≥n, nos pedir√° la contrase√±a que asignamos al descargar el certificado.</p>
  </li>
</ol>

<p>Una vez completado, el certificado aparecer√° en la lista de certificados personales.</p>

<h3 id="2-muestra-una-captura-de-pantalla-donde-se-vea-las-preferencias-del-navegador-donde-se-ve-instalado-tu-certificado"><span class="me-2">2. Muestra una captura de pantalla donde se vea las preferencias del navegador donde se ve instalado tu certificado.</span><a href="#2-muestra-una-captura-de-pantalla-donde-se-vea-las-preferencias-del-navegador-donde-se-ve-instalado-tu-certificado" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p><a href="/assets/img/posts/certificado/certificado.png" class="popup img-link  shimmer"><img src="/assets/img/posts/certificado/certificado.png" alt="image" loading="lazy"></a></p>

<h3 id="3-c√≥mo-puedes-hacer-una-copia-de-tu-certificado-como-vas-a-realizar-la-copia-de-seguridad-de-tu-certificado-razona-la-respuesta"><span class="me-2">3. ¬øC√≥mo puedes hacer una copia de tu certificado?, ¬øComo vas a realizar la copia de seguridad de tu certificado?. Razona la respuesta.</span><a href="#3-c√≥mo-puedes-hacer-una-copia-de-tu-certificado-como-vas-a-realizar-la-copia-de-seguridad-de-tu-certificado-razona-la-respuesta" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<ul>
  <li>En el men√∫ de opciones: <strong>Preferencias</strong> &gt; <strong>Privacidad y seguridad</strong> &gt; <strong>Seguridad</strong> &gt; <strong>Certificados</strong>.</li>
  <li>Selecciona <strong>Ver certificados</strong>.</li>
  <li>En <strong>Sus Certificados</strong> selecciona <strong>Hacer copia</strong>.</li>
</ul>

<p>De esta forma se realiza una copia del certificado digital. Y se introduce en un dispositivo externo para tener la copia.</p>

<p>El certificado digital es √∫nico y personal. Si perdemos el archivo o la clave privada, no podremos firmar documentos ni realizar tr√°mites online que requieran autenticaci√≥n. Adem√°s, una p√©rdida implicar√≠a solicitar de nuevo el certificado desde cero a la FNMT.</p>

<h3 id="4-investiga-como-exportar-la-clave-p√∫blica-de-tu-certificado"><span class="me-2">4. Investiga como exportar la clave p√∫blica de tu certificado.</span><a href="#4-investiga-como-exportar-la-clave-p√∫blica-de-tu-certificado" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>En <strong>Preferencias</strong> &gt; <strong>Privacidad y seguridad</strong> &gt; <strong>Seguridad</strong> &gt; <strong>Certificados</strong> &gt; <strong>Ver certificados</strong> hacemos doble click sobre el certificado para que aparezca el visor de certificados. En la pesta√±a <strong>Detalles</strong> da la opci√≥n de <strong>Exportar‚Ä¶</strong>.</p>

<p>Una vez descargado el <code class="language-plaintext highlighter-rouge">.pem</code> debemos extraer la clave p√∫blica, pues en un principio estar√° cifrado y no podremos ver el contenido. Para ello:</p>

<div class="language-bash highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre>pavlo@debian:~/certificado<span class="o">()</span><span class="nv">$ </span><span class="nb">ls</span> <span class="nt">-l</span>
total 12
<span class="nt">-rw-r--r--</span> 1 pavlo pavlo 7010 dic 20 20:39 MARTIN_HIDALGO_PABLO.p12
<span class="nt">-rw-r--r--</span> 1 pavlo pavlo 3012 dic 27 17:29 martin-hidalgo-pablo.pem
pavlo@debian:~/certificado<span class="o">()</span><span class="nv">$ </span><span class="nb">sudo </span>openssl pkcs12 <span class="nt">-in</span> MARTIN_HIDALGO_PABLO.p12 <span class="nt">-clcerts</span> <span class="nt">-nokeys</span> <span class="nt">-out</span> martin-hidalgo-pablo.pem
Enter Import Password:
</pre></td></tr></tbody></table></code></div></div>

<p>Donde:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">-in MARTIN_HIDALGO_PABLO.p12</code>: Especifica el archivo de entrada en formato .p12.</li>
  <li><code class="language-plaintext highlighter-rouge">-clcerts</code>: Indica que se extraiga √∫nicamente el certificado del archivo, excluyendo certificados de la cadena o intermedios.</li>
  <li><code class="language-plaintext highlighter-rouge">-nokeys</code>: Evita que se exporte la clave privada.</li>
  <li><code class="language-plaintext highlighter-rouge">-out martin-hidalgo-pablo.pem</code>: Especifica el nombre del archivo de salida que contendr√° la clave p√∫blica en formato PEM.</li>
</ul>

<p>Una vez hecho esto ya podremos ver la clave p√∫blica.</p>

<h2 id="tarea-2-validaci√≥n-del-certificado"><span class="me-2">Tarea 2: Validaci√≥n del certificado</span><a href="#tarea-2-validaci√≥n-del-certificado" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<h3 id="1-instala-en-tu-ordenador-el-software-autofirma-y-desde-la-p√°gina-de-valide-valida-tu-certificado-muestra-capturas-de-pantalla-donde-se-comprueba-la-validaci√≥n"><span class="me-2">1. Instala en tu ordenador el software autofirma y desde la p√°gina de VALIDe valida tu certificado. Muestra capturas de pantalla donde se comprueba la validaci√≥n.</span><a href="#1-instala-en-tu-ordenador-el-software-autofirma-y-desde-la-p√°gina-de-valide-valida-tu-certificado-muestra-capturas-de-pantalla-donde-se-comprueba-la-validaci√≥n" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>Descargamos el software desde la p√°gina https://firmaelectronica.gob.es/Home/Descargas.html. El archivo es un .zip.</p>

<p>Antes de descomprimirlo, es necesario un paquete de java, donde tenemos que instalar los siquientes paquetes:</p>

<div class="language-bash highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre>pavlo@debian:~<span class="o">()</span><span class="nv">$ </span><span class="nb">sudo </span>apt-get <span class="nb">install </span>default-jr
pavlo@debian:~<span class="o">()</span><span class="nv">$ </span><span class="nb">sudo </span>apt-get <span class="nb">install </span>default-jdk
</pre></td></tr></tbody></table></code></div></div>

<p>Una vez instalados los paquetes y descargada la herramienta necesaria:</p>

<div class="language-bash highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre>pavlo@debian:~/Descargas<span class="o">()</span><span class="nv">$ </span>unzip AutoFirma_Linux_Debian.zip
pavlo@debian:~/Descargas<span class="o">()</span><span class="nv">$ </span><span class="nb">sudo </span>apt <span class="nb">install </span>libnss3-tools
pavlo@debian:~/Descargas<span class="o">()</span><span class="nv">$ </span><span class="nb">sudo </span>dpkg <span class="nt">-i</span> AutoFirma_1_8_3.deb
</pre></td></tr></tbody></table></code></div></div>

<p>Despu√©s de instalar el software de AutoFirma nos dirigimos a la p√°gina web <a href="https://valide.redsara.es/valide/validarCertificado/ejecutar.html">VALIDe</a> para verificar el certificado.</p>

<p>En donde debemos seleccionar el certificado:</p>

<p><a href="/assets/img/posts/certificado/valide.png" class="popup img-link  shimmer"><img src="/assets/img/posts/certificado/valide.png" alt="image" loading="lazy"></a></p>

<p>E introducir el c√≥digo de seguridad del CAPTCHA. Y ya tendr√≠amos el certificado validado correctamente:</p>

<p><a href="/assets/img/posts/certificado/verificacion.png" class="popup img-link  shimmer"><img src="/assets/img/posts/certificado/verificacion.png" alt="image" loading="lazy"></a></p>

<h2 id="tarea-3-firma-electr√≥nica"><span class="me-2">Tarea 3: Firma electr√≥nica</span><a href="#tarea-3-firma-electr√≥nica" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<h3 id="1-utilizando-la-p√°gina-valide-y-el-programa-autofirma-firma-un-documento-con-tu-certificado-y-env√≠alo-por-correo-a-un-compa√±ero"><span class="me-2">1. Utilizando la p√°gina VALIDe y el programa autofirma, firma un documento con tu certificado y env√≠alo por correo a un compa√±ero.</span><a href="#1-utilizando-la-p√°gina-valide-y-el-programa-autofirma-firma-un-documento-con-tu-certificado-y-env√≠alo-por-correo-a-un-compa√±ero" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>Para esta apartado voy a crear dos ficheros para posteriormente firmarlos con nuestro certificado digital. Uno de ellos se llamar√° <code class="language-plaintext highlighter-rouge">ficherovalide.txt</code> y otro <code class="language-plaintext highlighter-rouge">ficheroautofirma.txt</code></p>

<div class="language-bash highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre>pavlo@debian:~/certificado<span class="o">()</span><span class="nv">$ </span><span class="nb">echo</span> <span class="s1">'Este fichero est√° firmado por VALIDe'</span> <span class="o">&gt;</span> ficherovalide.txt
pavlo@debian:~/certificado<span class="o">()</span><span class="nv">$ </span><span class="nb">echo</span> <span class="s1">'Este fichero est√° firmado por AutoFirma'</span> <span class="o">&gt;</span> ficheroautofirma.txt
</pre></td></tr></tbody></table></code></div></div>

<p>Una vez generados los ficheros vamos a proceder a firmar el primero de ellos a trav√©s de la p√°gina <a href="https://valide.redsara.es/valide/">VALIDe</a>. En este caso, pulsaremos en el apartado <strong>Realizar Firma</strong>.</p>

<p>Dentro del mismo, pulsaremos en <strong>Firmar</strong> y acto seguido nos pedir√° el fichero que deseamos firmar. En este caso, tendremos que elegir el fichero <code class="language-plaintext highlighter-rouge">ficherovalide.txt</code>, indicando adem√°s el certificado que queremos utilizar para ello.</p>

<p>Si todo ha salido correctamente nos saldr√° el siguiente mensaje:</p>

<p><a href="/assets/img/posts/certificado/ficherovalide.png" class="popup img-link  shimmer"><img src="/assets/img/posts/certificado/ficherovalide.png" alt="image" loading="lazy"></a></p>

<p>Como se puede apreciar, se ha indicado que la firma se ha realizado correctamente, por lo que pulsaremos en <strong>Guardar Firma</strong> para as√≠ almacenar en nuestra m√°quina el fichero resultante de dicho proceso. En mi caso, he decidido asignarle el nombre <code class="language-plaintext highlighter-rouge">ficherovalide.txt_firmado.csig</code>, para as√≠ diferenciarlo.</p>

<p>Bien, ya hemos firmado uno de los dos, as√≠ que para el siguiente, volveremos a la aplicaci√≥n de escritorio AutoFirma y elegiremos en √©ste caso el fichero <code class="language-plaintext highlighter-rouge">ficheroautofirma.txt</code>. Tras ello, pulsaremos en Firmar y nos pedir√° el certificado a usar para la firma, seguido de la ruta donde almacenar el fichero resultante, que en este caso, he decidido asignarle el nombre <code class="language-plaintext highlighter-rouge">ficheroautofirma.txt_firmado.csig</code>.</p>

<p>Si todo ha funcionado correctamente obtendremos el siguiente mensaje informativo:</p>

<p><a href="/assets/img/posts/certificado/ficheroautofirma.png" class="popup img-link  shimmer"><img src="/assets/img/posts/certificado/ficheroautofirma.png" alt="image" loading="lazy"></a></p>

<h3 id="2-tu-debes-recibir-otro-documento-firmado-por-un-compa√±ero-y-utilizando-las-herramientas-anteriores-debes-visualizar-la-firma-visualizar-firma-y-verificar-firma-puedes-verificar-la-firma-aunque-no-tengas-la-clave-p√∫blica-de-tu-compa√±ero-es-necesario-estar-conectado-a-internet-para-hacer-la-validaci√≥n-de-la-firma-razona-tus-respuestas"><span class="me-2">2. Tu debes recibir otro documento firmado por un compa√±ero y utilizando las herramientas anteriores debes visualizar la firma (Visualizar Firma) y (Verificar Firma). ¬øPuedes verificar la firma aunque no tengas la clave p√∫blica de tu compa√±ero?, ¬øEs necesario estar conectado a internet para hacer la validaci√≥n de la firma?. Razona tus respuestas.</span><a href="#2-tu-debes-recibir-otro-documento-firmado-por-un-compa√±ero-y-utilizando-las-herramientas-anteriores-debes-visualizar-la-firma-visualizar-firma-y-verificar-firma-puedes-verificar-la-firma-aunque-no-tengas-la-clave-p√∫blica-de-tu-compa√±ero-es-necesario-estar-conectado-a-internet-para-hacer-la-validaci√≥n-de-la-firma-razona-tus-respuestas" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>Para verificar estas firmas, accederemos a la plataforma VALIDe y seleccionaremos la opci√≥n ‚ÄúValidar Firma‚Äù.</p>

<p>En esta secci√≥n, elegiremos el archivo firmado que deseamos comprobar. En este caso, seleccionaremos el archivo <strong>hola.txt_signed.csig</strong>, completaremos el Captcha solicitado y haremos clic en ‚ÄúValidar‚Äù.</p>

<p>Si el proceso se realiza correctamente, obtendremos un mensaje informativo que confirma que la validaci√≥n ha sido exitosa:</p>

<p><a href="/assets/img/posts/certificado/joseautofirma.png" class="popup img-link  shimmer"><img src="/assets/img/posts/certificado/joseautofirma.png" alt="image" loading="lazy"></a></p>

<p>Este mensaje indica que la firma ha sido validada correctamente, lo que certifica que el archivo ha sido firmado por mi compa√±ero, quien no puede negar haber realizado esta acci√≥n. Luego, repetiremos el mismo procedimiento con el archivo <strong>hola2.txt_firmado.csig</strong> y obtendremos el siguiente resultado:</p>

<p><a href="/assets/img/posts/certificado/mensajevalidejose.png" class="popup img-link  shimmer"><img src="/assets/img/posts/certificado/mensajevalidejose.png" alt="image" loading="lazy"></a></p>

<h3 id="3-entre-dos-compa√±eros-firmar-los-dos-un-documento-verificar-la-firma-para-comprobar-que-est√°-firmado-por-los-dos"><span class="me-2">3. Entre dos compa√±eros, firmar los dos un documento, verificar la firma para comprobar que est√° firmado por los dos.</span><a href="#3-entre-dos-compa√±eros-firmar-los-dos-un-documento-verificar-la-firma-para-comprobar-que-est√°-firmado-por-los-dos" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p><a href="/assets/img/posts/certificado/kk.png" class="popup img-link  shimmer"><img src="/assets/img/posts/certificado/kk.png" alt="image" loading="lazy"></a></p>

<p><a href="/assets/img/posts/certificado/firmadoporlosdos.png" class="popup img-link  shimmer"><img src="/assets/img/posts/certificado/firmadoporlosdos.png" alt="image" loading="lazy"></a></p>

<h2 id="tarea-4-autentificaci√≥n"><span class="me-2">Tarea 4: Autentificaci√≥n</span><a href="#tarea-4-autentificaci√≥n" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<p>Accedemos a la web de la <a href="https://sede.dgt.gob.es/es/permisos-de-conducir/permiso-por-puntos/consulta-de-puntos/">DGT</a> para verificar el funcionamiento de nuestro certificado digital accediendo a nuestro historial de puntos.</p>

<p><a href="/assets/img/posts/certificado/dgt.png" class="popup img-link  shimmer"><img src="/assets/img/posts/certificado/dgt.png" alt="image" loading="lazy"></a></p>

<p>Podremos elegir entre los distintos tipos de acceso y elegimos Cl@ve. Seguidamente, pulsaremos en DNIe / Certificado electr√≥nico y se abrir√° una ventana emergente. En dicha ventana emergente tendremos que seleccionar aquel certificado que queremos utilizar para la autenticaci√≥n, as√≠ que en mi caso, seleccionar√© el √∫nico disponible, de manera que si no ha habido ning√∫n problema, nos habremos autenticado en la p√°gina de la Direcci√≥n General de Tr√°fico sin tener que introducir ning√∫n tipo de credenciales:</p>

<p><a href="/assets/img/posts/certificado/puntosdgt.png" class="popup img-link  shimmer"><img src="/assets/img/posts/certificado/puntosdgt.png" alt="image" loading="lazy"></a></p>

<h2 id="https--ssl"><span class="me-2">HTTPS / SSL</span><a href="#https--ssl" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<p>Antes de hacer esta pr√°ctica vamos a crear una p√°gina web (puedes usar una p√°gina est√°tica o instalar una aplicaci√≥n web) en un servidor web apache2 que se acceda con el nombre <code class="language-plaintext highlighter-rouge">tunombre.iesgn.org</code>.</p>

<h3 id="preparaci√≥n-del-sitio-web"><span class="me-2">Preparaci√≥n del sitio web</span><a href="#preparaci√≥n-del-sitio-web" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>Para realizar este punto, instalaremos un servidor apache, y lo configuraremos para que nos sirva una p√°gina web con https. Para ello, deberemos seguir los siguientes pasos:</p>

<ul>
  <li>Instalamos el servidor:</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>debian@https:~<span class="nv">$ </span><span class="nb">sudo </span>apt <span class="nb">install </span>apache2
</pre></td></tr></tbody></table></code></div></div>

<ul>
  <li>Deshabilitamos el VirtualHost que viene por defecto para que no nos d√© problemas:</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre>debian@https:~<span class="nv">$ </span><span class="nb">sudo </span>a2dissite 000-default.conf
Site 000-default disabled.
To activate the new configuration, you need to run:
  systemctl reload apache2
debian@https:~<span class="nv">$ </span><span class="nb">sudo </span>systemctl reload apache2
</pre></td></tr></tbody></table></code></div></div>

<ul>
  <li>Creamos un nuevo fichero de configuraci√≥n donde ir√° el contenido:</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td><td class="rouge-code"><pre>debian@https:~<span class="nv">$ </span><span class="nb">sudo mkdir</span> /var/www/html/pablo.iesgn.org
debian@https:~<span class="nv">$ </span><span class="nb">sudo </span>nano /var/www/html/pablo.iesgn.org/index.html
debian@https:~<span class="nv">$ </span><span class="nb">cat</span> /var/www/html/pablo.iesgn.org/index.html
&lt;<span class="o">!</span>DOCTYPE html&gt;
            &lt;html&gt;
                &lt;<span class="nb">head</span><span class="o">&gt;</span>
                &lt;title&gt;pablo.iesgn.org&lt;/title&gt;
                &lt;/head&gt;
            &lt;body&gt;
                &lt;h1&gt;pablo.iesgn.org&lt;/h1&gt;
                &lt;p&gt;Pagina web sencilla para criptografia - HTTPS/SSL&lt;/p&gt;
            &lt;/body&gt;
        &lt;/html&gt;
</pre></td></tr></tbody></table></code></div></div>

<ul>
  <li>Ahora creamos un archivo de configuraci√≥n para el dominio <code class="language-plaintext highlighter-rouge">pablo.iesgn.org</code></li>
</ul>

<div class="language-shell highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre></td><td class="rouge-code"><pre>debian@https:~<span class="nv">$ </span><span class="nb">cat</span> /etc/apache2/sites-available/pablo.iesgn.org.conf
&lt;VirtualHost <span class="k">*</span>:80&gt;
    ServerName pablo.iesgn.org
    DocumentRoot /var/www/html/pablo.iesgn.org

    &lt;Directory /var/www/html/pablo.iesgn.org&gt;
        Options Indexes FollowSymLinks
        AllowOverride All
        Require all granted
    &lt;/Directory&gt;

    ErrorLog <span class="k">${</span><span class="nv">APACHE_LOG_DIR</span><span class="k">}</span>/pablo.iesgn.org_error.log
    CustomLog <span class="k">${</span><span class="nv">APACHE_LOG_DIR</span><span class="k">}</span>/pablo.iesgn.org_access.log combined
&lt;/VirtualHost&gt;
</pre></td></tr></tbody></table></code></div></div>

<ul>
  <li>Habilitamos el nuevo VirtualHost y reiniciamos el servicio de Apache.</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre>debian@https:~<span class="nv">$ </span><span class="nb">sudo </span>a2ensite pablo.iesgn.org.conf
Enabling site pablo.iesgn.org.
To activate the new configuration, you need to run:
  systemctl reload apache2
debian@https:~<span class="nv">$ </span><span class="nb">sudo </span>systemctl reload apache2
</pre></td></tr></tbody></table></code></div></div>

<ul>
  <li>Por √∫ltimo tenemos que realizar la resoluci√≥n est√°tica, pues la p√°gina web est√° en una instancia de OpenStack:</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="rouge-code"><pre>debian@https:~<span class="nv">$ </span><span class="nb">cat</span> /etc/hosts
127.0.0.1	localhost
::1		localhost ip6-localhost ip6-loopback
ff02::1		ip6-allnodes
ff02::2		ip6-allrouters

172.22.200.222	pablo.iesgn.org
</pre></td></tr></tbody></table></code></div></div>

<div class="language-bash highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td><td class="rouge-code"><pre>pavlo@debian:~<span class="o">()</span><span class="nv">$ </span><span class="nb">cat</span> /etc/hosts
127.0.0.1	localhost
127.0.1.1	debian
172.22.203.178  django-pablo.com
<span class="c">#172.22.7.9	wordpress.pablo.beer</span>
<span class="c">#172.22.9.234	biblioteca.pablo.org</span>
172.22.123.1	proxmox.gonzalonazareno.org
172.22.200.222	pablo.iesgn.org

<span class="c"># The following lines are desirable for IPv6 capable hosts</span>
::1     localhost ip6-localhost ip6-loopback
ff02::1 ip6-allnodes
ff02::2 ip6-allrouters
</pre></td></tr></tbody></table></code></div></div>

<p>Y como vemos la p√°gina ya se puede ver correctamente:</p>

<p><a href="/assets/img/posts/certificado/paginaweb.png" class="popup img-link  shimmer"><img src="/assets/img/posts/certificado/paginaweb.png" alt="image" loading="lazy"></a></p>

<h2 id="tarea-1-certificado-autofirmado"><span class="me-2">Tarea 1: Certificado autofirmado</span><a href="#tarea-1-certificado-autofirmado" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<p>Esta pr√°ctica la vamos a realizar con un compa√±ero. En un primer momento un alumno crear√° una Autoridad Certficadora y firmar√° un certificado para la p√°gina del otro alumno. Posteriormente se volver√° a realizar la pr√°ctica con los roles cambiados.</p>

<p>Para hacer esta pr√°ctica puedes buscar informaci√≥n en internet, algunos enlaces interesantes:</p>

<p><a href="https://www.phildev.net/ssl/">Phil‚Äôs X509/SSL Guide</a>
<a href="https://gist.github.com/Soarez/9688998">How to setup your own CA with OpenSSL</a></p>

<p>En esta ocasi√≥n voy a ser yo el que haga de autoridad certificadora, de manera que podremos firmar el certificado para que nuestro compa√±ero pueda implementar HTTPS en su servidor.</p>

<h3 id="crear-una-autoridad-certificadora"><span class="me-2">Crear una autoridad certificadora</span><a href="#crear-una-autoridad-certificadora" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>El primer paso consiste en establecer un directorio base para la Autoridad Certificadora (CA), con subdirectorios dedicados a diferentes funciones. Esto ayudar√° a mantener la organizaci√≥n durante todo el proceso. En este ejemplo, el directorio principal ser√° CA/ y contendr√°:</p>

<ul>
  <li>
    <p><strong>certsdb</strong>: Almac√©n de certificados firmados.</p>
  </li>
  <li>
    <p><strong>certreqs</strong>: Almac√©n de solicitudes de firma de certificados (CSR).</p>
  </li>
  <li>
    <p><strong>crl</strong>: Almac√©n de la lista de certificados revocados (CRL).</p>
  </li>
  <li>
    <p><strong>private</strong>: Almac√©n para la clave privada de la autoridad certificadora.</p>
  </li>
</ul>

<p>Para crear esta estructura de directorios, ejecutaremos:</p>

<div class="language-bash highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>debian@https:~<span class="nv">$ </span><span class="nb">mkdir</span> <span class="nt">-p</span> CA/<span class="o">{</span>certsdb,certreqs,crl,private<span class="o">}</span>
</pre></td></tr></tbody></table></code></div></div>

<p>Una vez creados los directorios, accedemos al directorio principal y visualizamos la estructura:</p>

<div class="language-bash highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre>debian@https:~/CA<span class="nv">$ </span>tree
<span class="nb">.</span>
‚îú‚îÄ‚îÄ certreqs
‚îú‚îÄ‚îÄ certsdb
‚îú‚îÄ‚îÄ crl
‚îî‚îÄ‚îÄ private
</pre></td></tr></tbody></table></code></div></div>

<p>Como el directorio <code class="language-plaintext highlighter-rouge">private</code> contendr√° informaci√≥n sensible (la clave privada de la CA), es importante restringir su acceso √∫nicamente al propietario. Cambiamos sus permisos a <code class="language-plaintext highlighter-rouge">700</code>:</p>

<div class="language-bash highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>debian@https:~/CA<span class="nv">$ </span><span class="nb">chmod </span>700 ./private
</pre></td></tr></tbody></table></code></div></div>

<p>La CA necesitar√° un archivo que act√∫e como base de datos para registrar los certificados emitidos. Este archivo se crear√° con:</p>

<div class="language-bash highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>debian@https:~/CA<span class="nv">$ </span><span class="nb">touch </span>index.txt
</pre></td></tr></tbody></table></code></div></div>

<p>En este paso, copiaremos el archivo de configuraci√≥n predeterminado de OpenSSL a nuestro directorio de trabajo y lo personalizaremos para adaptarlo a nuestra CA.</p>

<ol>
  <li>Buscamos el archivo de configuraci√≥n de OpenSSL en nuestro sistema. Las ubicaciones comunes son:</li>
</ol>

<ul>
  <li>
    <p><code class="language-plaintext highlighter-rouge">/usr/lib/ssl/openssl.cnf</code></p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">/etc/openssl.cnf</code></p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">/usr/share/ssl/openssl.cnf</code></p>
  </li>
</ul>

<ol>
  <li>Copiamos el archivo al directorio CA:</li>
</ol>

<div class="language-bash highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>debian@https:~/CA<span class="nv">$ </span><span class="nb">cp</span> /usr/lib/ssl/openssl.cnf ./
</pre></td></tr></tbody></table></code></div></div>

<ol>
  <li>Realizamos las siguientes modificaciones para que OpenSSL utilice los directorios creados anteriormente:</li>
</ol>

<div class="language-bash highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre></td><td class="rouge-code"><pre><span class="nb">dir</span>             <span class="o">=</span> /home/debian/CA
certs           <span class="o">=</span> <span class="nv">$dir</span>/certsdb
new_certs_dir   <span class="o">=</span> <span class="nv">$certs</span>

countryName_default             <span class="o">=</span> ES
stateOrProvinceName_default     <span class="o">=</span> Sevilla
localityName                    <span class="o">=</span> Dos Hermanas
0.organizationName              <span class="o">=</span> PabloMartin SL
organizationalUnitName          <span class="o">=</span> Informatica

<span class="c">#challengePassword              = A challenge password</span>
<span class="c">#challengePassword_min          = 4</span>
<span class="c">#challengePassword_max          = 20</span>

<span class="c">#unstructuredName               = An optional company name</span>
</pre></td></tr></tbody></table></code></div></div>

<p>Importante recalcar que estas solo son las modificaciones que yo he realizado, no es el fichero de configuraci√≥n al completo.</p>

<p>Tras ello, ya tendremos todo listo para generar nuestro par de claves y un fichero de solicitud de firma de certificado que posteriormente nos autofirmaremos, ejecutando para ello el comando:</p>

<div class="language-bash highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
</pre></td><td class="rouge-code"><pre>debian@https:~/CA<span class="nv">$ </span><span class="nb">sudo </span>openssl req <span class="nt">-new</span> <span class="nt">-newkey</span> rsa:2048 <span class="nt">-keyout</span> private/cakey.pem <span class="nt">-out</span> careq.pem <span class="nt">-config</span> ./openssl.cnf
..+...+.+.....+.+.....+....+..+...+.......+.....+...+..........+.........+..+...+.+.................+...................+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++<span class="k">*</span>.......+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++<span class="k">*</span>...+...........................+.+...+.........+..+..........+...+......+..+...+.......+..+.+.....+.........+....................................+.........+.+......+.....+..........+...+..................+.........+.....+...+.+..+...+....+...+.........+.........+.........+.....+.......+...+..................+...+..+....+......+...+...........+...+.......+...+.....+...+....+......+............+.................+................+..............+....+...........+........................+.+.....+......+..........+.....+....+...............+......+...+..+....+...+...+.........+........+.+.........+..+.+.........+...+..+....+..+...+....+........+.......+..+....+.....+............+...+......+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
....+.+........+....+..+....+.........+...............+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++<span class="k">*</span>...+............+..+.......+.....+....+..+...+....+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++<span class="k">*</span>..+............+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Enter PEM pass phrase:
Verifying - Enter PEM pass phrase:
<span class="nt">-----</span>
You are about to be asked to enter information that will be incorporated
into your certificate request.
What you are about to enter is what is called a Distinguished Name or a DN.
There are quite a few fields but you can leave some blank
For some fields there will be a default value,
If you enter <span class="s1">'.'</span>, the field will be left blank.
<span class="nt">-----</span>
Country Name <span class="o">(</span>2 letter code<span class="o">)</span> <span class="o">[</span>ES]:
State or Province Name <span class="o">(</span>full name<span class="o">)</span> <span class="o">[</span>Sevilla]:
Dos Hermanas <span class="o">[]</span>:
PabloMartin SL <span class="o">[</span>Internet Widgits Pty Ltd]:
Informatica <span class="o">[]</span>:
Common Name <span class="o">(</span>e.g. server FQDN or YOUR name<span class="o">)</span> <span class="o">[]</span>:pablo.debian
Email Address <span class="o">[]</span>:pmartinhidalgo19@gmail.com
</pre></td></tr></tbody></table></code></div></div>

<p>El comando para crear un nuevo par de claves y una solicitud de firma de certificado (CSR) incluye estas opciones:</p>

<ul>
  <li>-new: Genera un par de claves nuevo.</li>
  <li>-newkey: Define el tipo y tama√±o del par de claves, en este caso RSA de 2048 bits.</li>
  <li>-keyout: Especifica la ubicaci√≥n donde se guardar√° la clave privada (por ejemplo, en private/cakey.pem).</li>
  <li>-out: Define d√≥nde guardar el CSR (por ejemplo, careq.pem).</li>
  <li>-config: Indica a OpenSSL usar un archivo de configuraci√≥n personalizado (openssl.cnf).</li>
</ul>

<p>Al ejecutar el comando, se solicita una frase de paso para proteger la clave privada. Tambi√©n se piden algunos datos b√°sicos que deben coincidir con la informaci√≥n previamente configurada en el archivo <code class="language-plaintext highlighter-rouge">openssl.cnf</code>.</p>

<p>Despu√©s de crear el CSR, se puede autofirmar el certificado para usarlo como Autoridad Certificadora (CA). Esto se realiza con el comando:</p>

<div class="language-bash highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
</pre></td><td class="rouge-code"><pre>debian@https:~/CA<span class="nv">$ </span><span class="nb">sudo </span>openssl ca <span class="nt">-create_serial</span> <span class="nt">-out</span> cacert.pem <span class="nt">-days</span> 365 <span class="nt">-keyfile</span> private/cakey.pem <span class="nt">-selfsign</span> <span class="nt">-extensions</span> v3_ca <span class="nt">-config</span> ./openssl.cnf <span class="nt">-infiles</span> careq.pem
Using configuration from ./openssl.cnf
Enter pass phrase <span class="k">for </span>private/cakey.pem:
Check that the request matches the signature
Signature ok
Certificate Details:
        Serial Number:
            36:15:6a:51:89:82:f6:66:e0:d2:4a:5d:43:61:6f:7b:3b:87:c3:5b
        Validity
            Not Before: Jan 11 11:56:18 2025 GMT
            Not After : Jan 11 11:56:18 2026 GMT
        Subject:
            countryName               <span class="o">=</span> ES
            stateOrProvinceName       <span class="o">=</span> Sevilla
            organizationName          <span class="o">=</span> Internet Widgits Pty Ltd
            commonName                <span class="o">=</span> pablo.debian
            emailAddress              <span class="o">=</span> pmartinhidalgo19@gmail.com
        X509v3 extensions:
            X509v3 Subject Key Identifier: 
                70:63:CD:8F:AD:5E:82:EF:B8:DB:43:10:03:24:CA:AE:EB:6D:2F:5F
            X509v3 Authority Key Identifier: 
                70:63:CD:8F:AD:5E:82:EF:B8:DB:43:10:03:24:CA:AE:EB:6D:2F:5F
            X509v3 Basic Constraints: critical
                CA:TRUE
Certificate is to be certified <span class="k">until </span>Jan 11 11:56:18 2026 GMT <span class="o">(</span>365 days<span class="o">)</span>
Sign the certificate? <span class="o">[</span>y/n]:y


1 out of 1 certificate requests certified, commit? <span class="o">[</span>y/n]y
Write out database with 1 new entries
Database updated
</pre></td></tr></tbody></table></code></div></div>

<p>Par√°metros clave:</p>

<ul>
  <li>-create_serial: Genera un n√∫mero de serie √∫nico de 128 bits para evitar conflictos si se reinicia el proceso.</li>
  <li>-out: Especifica el archivo de salida del certificado firmado (por ejemplo, cacert.pem).</li>
  <li>-days: Define la validez del certificado en d√≠as (en este caso, 365 d√≠as).</li>
  <li>-keyfile: Utiliza la clave privada creada anteriormente (private/cakey.pem) para la firma.</li>
  <li>-selfsign: Indica que el certificado ser√° autofirmado.</li>
  <li>-extensions: Selecciona las extensiones configuradas en el archivo openssl.cnf (por ejemplo, v3_ca).</li>
  <li>-config: Indica el archivo de configuraci√≥n de OpenSSL modificado.</li>
  <li>-infiles: Especifica el CSR a firmar (en este caso, careq.pem).</li>
</ul>

<p>Durante la ejecuci√≥n, OpenSSL solicita:</p>

<ol>
  <li>La frase de paso configurada para la clave privada.</li>
  <li>Confirmaci√≥n de la informaci√≥n del certificado antes de firmarlo.</li>
  <li>Aprobaci√≥n final para guardar el certificado.</li>
</ol>

<p>Para verificar que el certificado de la autoridad certificadora se encuentra contenido en el directorio actual, listaremos el contenido del mismo haciendo uso del comando:</p>

<div class="language-bash highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td><td class="rouge-code"><pre>debian@https:~/CA<span class="nv">$ </span><span class="nb">ls</span> <span class="nt">-l</span>
total 52
<span class="nt">-rw-r--r--</span> 1 root root  4614 Jan 11 11:56 cacert.pem
<span class="nt">-rw-r--r--</span> 1 root root  1045 Jan 11 11:51 careq.pem
drwxr-xr-x 2 root root  4096 Jan 11 11:30 certreqs
drwxr-xr-x 2 root root  4096 Jan 11 11:56 certsdb
drwxr-xr-x 2 root root  4096 Jan 11 11:30 crl
<span class="nt">-rw-r--r--</span> 1 root root   166 Jan 11 11:56 index.txt
<span class="nt">-rw-r--r--</span> 1 root root    21 Jan 11 11:56 index.txt.attr
<span class="nt">-rw-r--r--</span> 1 root root     0 Jan 11 11:37 index.txt.old
<span class="nt">-rw-r--r--</span> 1 root root 12279 Jan 11 11:46 openssl.cnf
drwx------ 2 root root  4096 Jan 11 11:50 private
<span class="nt">-rw-r--r--</span> 1 root root    41 Jan 11 11:56 serial
</pre></td></tr></tbody></table></code></div></div>

<p>Como vemos existe un fichero <strong>cacert.pem</strong> que es resultado de firmar el fichero de solicitud de firma de certificado <strong>careq.pem</strong>.</p>

<p>Todo est√° preparado para firmar el certificado del servidor de mi compa√±ero. Por ello, he colocado su archivo de solicitud de firma dentro del directorio <code class="language-plaintext highlighter-rouge">certreqs/</code>, que es la ubicaci√≥n designada para estos casos.</p>

<div class="language-bash highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre>debian@https:~/CA<span class="nv">$ </span><span class="nb">ls</span> <span class="nt">-l</span> certreqs/
total 4
<span class="nt">-rw-r--r--</span> 1 root root 1074 Jan 11 12:10 joseantoniocgonzalez.csr
</pre></td></tr></tbody></table></code></div></div>

<p>Ya podemos proceder a firmar usando el siguiente comando:</p>

<div class="language-bash highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
</pre></td><td class="rouge-code"><pre>debian@https:~/CA<span class="nv">$ </span><span class="nb">sudo </span>openssl ca <span class="nt">-config</span> openssl.cnf <span class="nt">-out</span> certsdb/joseantoniocgonzalez.crt <span class="nt">-infiles</span> certreqs/joseantoniocgonzalez.csr
Using configuration from openssl.cnf
Enter pass phrase <span class="k">for</span> /home/debian/CA/private/cakey.pem:
Check that the request matches the signature
Signature ok
Certificate Details:
        Serial Number:
            36:15:6a:51:89:82:f6:66:e0:d2:4a:5d:43:61:6f:7b:3b:87:c3:5d
        Validity
            Not Before: Jan 11 12:37:59 2025 GMT
            Not After : Jan 11 12:37:59 2026 GMT
        Subject:
            countryName               <span class="o">=</span> ES
            stateOrProvinceName       <span class="o">=</span> SEVILLA
            localityName              <span class="o">=</span> SEVILLA
            organizationName          <span class="o">=</span> ASIR
            commonName                <span class="o">=</span> joseantoniocgonzalez.iesgn.org
            emailAddress              <span class="o">=</span> joseantoniocgonzalez83@gmail.com
        X509v3 extensions:
            X509v3 Basic Constraints: 
                CA:FALSE
            X509v3 Subject Key Identifier: 
                0C:95:B9:A0:01:E3:46:16:7D:FE:4D:E1:6B:54:A4:E0:AA:DC:05:80
            X509v3 Authority Key Identifier: 
                70:63:CD:8F:AD:5E:82:EF:B8:DB:43:10:03:24:CA:AE:EB:6D:2F:5F
Certificate is to be certified <span class="k">until </span>Jan 11 12:37:59 2026 GMT <span class="o">(</span>365 days<span class="o">)</span>
Sign the certificate? <span class="o">[</span>y/n]:y


1 out of 1 certificate requests certified, commit? <span class="o">[</span>y/n]y
Write out database with 1 new entries
Database updated
</pre></td></tr></tbody></table></code></div></div>

<p>Donde:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">-config</code>: Indica a OpenSSL que utilice un archivo de configuraci√≥n personalizado, en este caso llamado openssl.cnf, en lugar del predeterminado.</li>
  <li><code class="language-plaintext highlighter-rouge">-out</code>: Especifica d√≥nde se guardar√° el certificado firmado. Aqu√≠, se almacenar√° en el directorio certsdb/ con el nombre joseantoniocgonzalez.crt.</li>
  <li><code class="language-plaintext highlighter-rouge">-infiles</code>: Se√±ala el archivo CSR que se desea firmar. En este caso, es el archivo joseantoniocgonzalez.csr, ubicado en el directorio certreqs/.</li>
</ul>

<p>Al ejecutar el comando, OpenSSL solicita la frase de paso configurada previamente para proteger la clave privada de la autoridad certificadora. Esto garantiza que, incluso si la clave privada cae en manos equivocadas, no puedan realizar firmas indebidas. Antes de proceder, OpenSSL tambi√©n muestra la informaci√≥n contenida en el certificado para confirmar que es correcta.</p>

<p>Una vez firmado, el certificado se almacena en el directorio certsdb/. Para confirmar su creaci√≥n, listamos el contenido de dicho directorio con el comando:</p>

<div class="language-bash highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre>debian@https:~/CA<span class="nv">$ </span><span class="nb">ls</span> <span class="nt">-l</span> certsdb/
total 24
<span class="nt">-rw-r--r--</span> 1 root root 4614 Jan 11 11:56 36156A518982F666E0D24A5D43616F7B3B87C35B.pem
<span class="nt">-rw-r--r--</span> 1 root root 4643 Jan 11 12:38 36156A518982F666E0D24A5D43616F7B3B87C35D.pem
<span class="nt">-rw-r--r--</span> 1 root root 4643 Jan 11 12:38 joseantoniocgonzalez.crt
</pre></td></tr></tbody></table></code></div></div>

<p>El resultado muestra tres archivos:</p>

<ol>
  <li>El certificado de la autoridad certificadora.</li>
  <li>Dos archivos relacionados con el certificado del compa√±ero: uno identificado con un n√∫mero de serie y otro con un nombre descriptivo, facilitando su identificaci√≥n.</li>
</ol>

<p>El archivo que debe entregarse al compa√±ero es certsdb/joseantoniocgonzalez.crt, que contiene su certificado firmado. Adem√°s, debe recibir el archivo cacert.pem, que es el certificado de la autoridad certificadora, necesario para verificar la validez del certificado.</p>

<p>El archivo index.txt funciona como una base de datos en texto plano que registra informaci√≥n sobre los certificados emitidos por la CA. Se puede visualizar con:</p>

<div class="language-bash highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre>debian@https:~/CA<span class="nv">$ </span><span class="nb">cat </span>index.txt
V	260111115618Z		36156A518982F666E0D24A5D43616F7B3B87C35B	unknown	/C<span class="o">=</span>ES/ST<span class="o">=</span>Sevilla/O<span class="o">=</span>Internet Widgits Pty Ltd/CN<span class="o">=</span>pablo.debian/emailAddress<span class="o">=</span>pmartinhidalgo19@gmail.com
V	260111123759Z		36156A518982F666E0D24A5D43616F7B3B87C35D	unknown	/C<span class="o">=</span>ES/ST<span class="o">=</span>SEVILLA/L<span class="o">=</span>SEVILLA/O<span class="o">=</span>ASIR/CN<span class="o">=</span>joseantoniocgonzalez.iesgn.org/emailAddress<span class="o">=</span>joseantoniocgonzalez83@gmail.com
</pre></td></tr></tbody></table></code></div></div>

<p>En el contenido se puede observar:</p>

<ul>
  <li>Estado de los certificados: En este caso, ambos est√°n marcados como v√°lidos (V).</li>
  <li>Fecha de expiraci√≥n: Indica hasta cu√°ndo es v√°lido cada certificado.</li>
  <li>N√∫mero de serie: Identificador √∫nico de cada certificado.</li>
  <li>Informaci√≥n del sujeto: Detalla los campos incluidos en el CSR, como el pa√≠s, la organizaci√≥n y el correo electr√≥nico.</li>
</ul>

<h3 id="configurar-https"><span class="me-2">Configurar HTTPS</span><a href="#configurar-https" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>Ahora me toca hacerlo al rev√©s, lo primero ser√° generar una solicitud de firma de certificado (CSR, por sus siglas en ingl√©s). En este caso utilizaremos OpenSSL, aunque tambi√©n se podr√≠an emplear otras herramientas de software para lograrlo.</p>

<p>Para crear la solicitud, primero necesitamos contar con una clave privada que estar√° vinculada al certificado. Por lo tanto, procederemos a generar una clave privada RSA de 4096 bits, la cual ser√° almacenada en el directorio <code class="language-plaintext highlighter-rouge">/etc/ssl/private/</code>. Esto se realiza mediante el siguiente comando:</p>

<div class="language-bash highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre>debian@https:~<span class="nv">$ </span><span class="nb">sudo </span>openssl genrsa 4096 <span class="o">&gt;</span> pablomh.key
debian@https:~<span class="nv">$ </span><span class="nb">sudo mv </span>pablomh.key /etc/ssl/private/
</pre></td></tr></tbody></table></code></div></div>

<p>Despu√©s de generar la clave privada, ajustaremos sus permisos a 400, lo que restringir√° el acceso para que √∫nicamente el propietario pueda leer su contenido. Dado que se trata de informaci√≥n sensible, este paso, aunque no obligatorio, es altamente recomendable por razones de seguridad.</p>

<div class="language-bash highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>debian@https:~<span class="nv">$ </span><span class="nb">sudo chmod </span>400 /etc/ssl/private/pablomh.key
</pre></td></tr></tbody></table></code></div></div>

<p>A continuaci√≥n, procederemos a generar un archivo <code class="language-plaintext highlighter-rouge">.csr</code>, que ser√° la solicitud de firma de certificado destinada a ser validada por la autoridad certificadora (CA) configurada por nuestro compa√±ero. Este archivo no incluye informaci√≥n sensible, por lo que su ubicaci√≥n y los permisos asignados no son cr√≠ticos. Por lo tanto:</p>

<div class="language-bash highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
</pre></td><td class="rouge-code"><pre>debian@https:~<span class="nv">$ </span><span class="nb">sudo </span>openssl req <span class="nt">-new</span> <span class="nt">-key</span> /etc/ssl/private/pablomh.key <span class="nt">-out</span> pablomh.csr
You are about to be asked to enter information that will be incorporated
into your certificate request.
What you are about to enter is what is called a Distinguished Name or a DN.
There are quite a few fields but you can leave some blank
For some fields there will be a default value,
If you enter <span class="s1">'.'</span>, the field will be left blank.
<span class="nt">-----</span>
Country Name <span class="o">(</span>2 letter code<span class="o">)</span> <span class="o">[</span>AU]:ES
State or Province Name <span class="o">(</span>full name<span class="o">)</span> <span class="o">[</span>Some-State]:Sevilla
Locality Name <span class="o">(</span>eg, city<span class="o">)</span> <span class="o">[]</span>:Dos Hermanas
Organization Name <span class="o">(</span>eg, company<span class="o">)</span> <span class="o">[</span>Internet Widgits Pty Ltd]:ASIR
Organizational Unit Name <span class="o">(</span>eg, section<span class="o">)</span> <span class="o">[]</span>:Informatica
Common Name <span class="o">(</span>e.g. server FQDN or YOUR name<span class="o">)</span> <span class="o">[]</span>:pablo.debian   
Email Address <span class="o">[]</span>:pmartinhidalgo19@gmail.com

Please enter the following <span class="s1">'extra'</span> attributes
to be sent with your certificate request
A challenge password <span class="o">[]</span>:
An optional company name <span class="o">[]</span>:
</pre></td></tr></tbody></table></code></div></div>

<p>Durante la ejecuci√≥n, nos pedir√° una serie de valores para identificar al certificado, que tendremos que rellenar en base a la informaci√≥n que nos proporcionar√° la autoridad certificadora; excepto los dos √∫ltimos valores, los cuales pedir√°n una serie de valores cuya introducci√≥n es opcional.</p>

<p>Para verificar que el fichero de solicitud de firma ha sido correctamente generado listaremos el contenido del directorio actual:</p>

<div class="language-bash highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre>debian@https:~<span class="nv">$ </span><span class="nb">ls</span> <span class="nt">-l</span>
total 16
drwxr-xr-x 6 root   root   4096 Jan 11 12:38 CA
<span class="nt">-rw-r--r--</span> 1 root   root   1773 Jan 14 17:00 pablomh.csr
</pre></td></tr></tbody></table></code></div></div>

<p>Como vemos existe un fichero de nombre <code class="language-plaintext highlighter-rouge">pablomh.csr</code> que debemos enviar a nuestro compa√±ero, para que as√≠ sea firmado por la correspondiente autoridad certificadora que ha creado. Adem√°s de dicho certificado firmado, nos debe enviar la clave p√∫blica de la entidad certificadora, es decir, el certificado de la misma, para as√≠ poder verificar su firma sobre nuestro certificado.</p>

<p>Bien, pues Jose ya me ha enviado ambos ficheros, los cuales voy a almacenar en <code class="language-plaintext highlighter-rouge">/etc/ssl/certs/</code>.</p>

<p><a href="/assets/img/posts/certificado/discordjose.png" class="popup img-link  shimmer"><img src="/assets/img/posts/certificado/discordjose.png" alt="image" loading="lazy"></a></p>

<div class="language-bash highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre>debian@https:~<span class="nv">$ </span><span class="nb">ls</span> <span class="nt">-l</span> /etc/ssl/certs/ | <span class="nb">grep</span> <span class="s1">'pablomh'</span>
<span class="nt">-rw-r--r--</span> 1 root root   2090 Jan 14 17:31 pablomh.crt
debian@https:~<span class="nv">$ </span><span class="nb">ls</span> <span class="nt">-l</span> /etc/ssl/certs/ | <span class="nb">grep</span> <span class="s1">'cacert'</span>
<span class="nt">-rw-r--r--</span> 1 root root   2244 Jan 14 17:31 cacert.pem
</pre></td></tr></tbody></table></code></div></div>

<p>Debe existir un fichero de nombre tunombre.crt que es el resultado de la firma de la solicitud de firma de certificado que previamente le hemos enviado, y otro de nombre cacert.pem, que es el certificado de la entidad certificadora, con el que posteriormente se comprobar√° la firma de la autoridad certificadora sobre dicho certificado del servidor.</p>

<p>Al igual que apache2 inclu√≠a un VirtualHost por defecto para las peticiones entrantes por el puerto 80 (HTTP), contiene otro por defecto para las peticiones entrantes por el puerto 443 (HTTPS), de nombre default-ssl, que por defecto viene deshabilitado, as√≠ que procederemos a modificarlo teniendo en cuenta las siguientes directivas:</p>

<ul>
  <li>
    <p>ServerName: Al igual que en el VirtualHost anterior, tendremos que indicar el nombre de dominio a trav√©s del cu√°l accederemos al servidor.</p>
  </li>
  <li>
    <p>SSLEngine: Activa el motor SSL, necesario para hacer uso de HTTPS, por lo que su valor debe ser on.</p>
  </li>
  <li>
    <p>SSLCertificateFile: Indicamos la ruta del certificado del servidor firmado por la CA. En este caso, /etc/ssl/certs/pablomh.crt.</p>
  </li>
  <li>
    <p>SSLCertificateKeyFile: Indicamos la ruta de la clave privada asociada al certificado del servidor. En este caso, /etc/ssl/private/pablomh.key.</p>
  </li>
  <li>
    <p>SSLCACertificateFile: Indicamos la ruta del certificado de la CA con el que comprobaremos la firma de nuestro certificado. En este caso, /etc/ssl/certs/cacert.pem.</p>
  </li>
</ul>

<p>Quedando el archivo final de la siguiente forma:</p>

<div class="language-bash highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
</pre></td><td class="rouge-code"><pre>debian@https:~<span class="nv">$ </span><span class="nb">cat</span> /etc/apache2/sites-available/default-ssl.conf
&lt;VirtualHost <span class="k">*</span>:80&gt; 
  ServerName pablo.iesgn.org

  Redirect permanent / https://pablo.iesgn.org/
&lt;/VirtualHost&gt;
&lt;VirtualHost <span class="k">*</span>:443&gt;
	ServerAdmin webmaster@localhost
	ServerName pablo.iesgn.org
	DocumentRoot /var/www/html

	ErrorLog <span class="k">${</span><span class="nv">APACHE_LOG_DIR</span><span class="k">}</span>/error.log
	CustomLog <span class="k">${</span><span class="nv">APACHE_LOG_DIR</span><span class="k">}</span>/access.log combined

	SSLEngine on
	
	SSLCertificateFile      /etc/ssl/certs/pablomh.crt
	SSLCertificateKeyFile /etc/ssl/private/pablomh.key
	SSLCACertificateFile /etc/ssl/certs/cacert.pem
&lt;/VirtualHost&gt;
</pre></td></tr></tbody></table></code></div></div>

<p>Dado que √©ste VirtualHost no viene habilitado por defecto, tendremos que hacerlo manualmente:</p>

<div class="language-bash highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre>debian@https:~# <span class="nb">sudo </span>a2ensite default-ssl
Enabling site default-ssl.
To activate the new configuration, you need to run:
  systemctl reload apache2
</pre></td></tr></tbody></table></code></div></div>

<p>Adem√°s, lo que queremos hacer es forzar el uso de HTTPS (https://), de manera que estableceremos una redirecci√≥n permanente en el VirtualHost accesible en el puerto 80 para que se as√≠ no se permita servir la p√°gina por HTTP (http://). De forma que tendremos que hacer lo siguiente en el fichero:</p>

<div class="language-bash highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre></td><td class="rouge-code"><pre>debian@https:~<span class="nv">$ </span><span class="nb">cat</span> /etc/apache2/sites-available/000-default.conf
&lt;VirtualHost <span class="k">*</span>:80&gt;
        ServerName pablo.iesgn.org

        ServerAdmin webmaster@localhost
        DocumentRoot /var/www/html

        ErrorLog <span class="k">${</span><span class="nv">APACHE_LOG_DIR</span><span class="k">}</span>/error.log
        CustomLog <span class="k">${</span><span class="nv">APACHE_LOG_DIR</span><span class="k">}</span>/access.log combined

        Redirect 301 / https://pablo.iesgn.com/
&lt;/VirtualHost&gt;
</pre></td></tr></tbody></table></code></div></div>

<p>Reiniciamos:</p>

<div class="language-bash highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>debian@https:~<span class="nv">$ </span><span class="nb">sudo </span>systemctl restart apache2
</pre></td></tr></tbody></table></code></div></div>

<p><a href="/assets/img/posts/certificado/redirect.png" class="popup img-link  shimmer"><img src="/assets/img/posts/certificado/redirect.png" alt="image" loading="lazy"></a></p>

<p>Podemos observar que se ha generado una advertencia de seguridad, lo que confirma que la redirecci√≥n de <code class="language-plaintext highlighter-rouge">http://</code> a <code class="language-plaintext highlighter-rouge">https://</code> se ha realizado con √©xito.</p>

<p>Esta advertencia se debe a que el navegador no ha podido verificar la firma del certificado recibido desde el servidor, ya que no dispone de la clave p√∫blica o del certificado de la Autoridad Certificadora (CA). Para solucionar esto, es necesario importar manualmente dicho certificado en el navegador.</p>

<p>En el caso de Firefox, para llevar a cabo esta importaci√≥n, primero debemos hacer clic en el icono de las tres barras ubicado en la parte superior del navegador. Luego, accedemos a <strong>Preferencias</strong> (o <strong>Ajustes</strong>) y buscamos la secci√≥n <strong>Privacidad &amp; Seguridad</strong>. Desplaz√°ndonos hasta la parte inferior, encontraremos el apartado <strong>Certificados</strong>, donde haremos clic en <strong>Ver certificados</strong>. A continuaci√≥n, en la pesta√±a <strong>Autoridades</strong>, seleccionamos la opci√≥n <strong>Importar</strong>, lo que nos permitir√° a√±adir el certificado de la CA.</p>

<p>Una vez elegido el certificado a importar, aparecer√° un mensaje inform√°ndonos de que se nos solicita confiar en una nueva Autoridad Certificadora (CA). En este punto, simplemente confirmamos la acci√≥n haciendo clic en <strong>Aceptar</strong>.</p>

<p>Despu√©s de completar estos pasos, podremos comprobar que el certificado ha sido importado correctamente.</p>

<p><a href="/assets/img/posts/certificado/autoridadjose.png" class="popup img-link  shimmer"><img src="/assets/img/posts/certificado/autoridadjose.png" alt="image" loading="lazy"></a></p>

<p>Una vez importado el certificado recargamos la p√°gina para mostrar el contenido:</p>

<p><a href="/assets/img/posts/certificado/infoapache.png" class="popup img-link  shimmer"><img src="/assets/img/posts/certificado/infoapache.png" alt="image" loading="lazy"></a></p>

<p>Como podemos notar, la advertencia de seguridad ha vuelto a aparecer. Si observamos junto a la barra de direcciones, veremos un icono de candado. Al hacer clic en √©l, se desplegar√° la informaci√≥n correspondiente.</p>

<p>Adem√°s, si le damos a <strong>Ver Certificado</strong> nos mostrar√° informaci√≥n del mismo:</p>

<p><a href="/assets/img/posts/certificado/infocertificado.png" class="popup img-link  shimmer"><img src="/assets/img/posts/certificado/infocertificado.png" alt="image" loading="lazy"></a></p>

<p><strong>¬øPor qu√© el sitio no es seguro a pesar de usar HTTPS?</strong></p>

<p>El navegador sigue indicando que el sitio no es seguro porque el certificado utilizado ha sido emitido por una Autoridad Certificadora (CA) que no es reconocida como confiable por los navegadores. Esto ocurre porque el certificado ha sido generado por la CA de mi compa√±ero, y aunque la conexi√≥n est√© cifrada mediante HTTPS, navegadores como Chrome o Firefox no confiar√°n en una entidad que no est√© validada a nivel internacional.</p>

<p>Hemos verificado que con Apache2 hemos logrado que HTTPS funcione, aunque sin una certificaci√≥n oficial no ser√° reconocido como seguro. Ahora realizaremos la misma prueba con la otra alternativa: Nginx.</p>

<p>El primer paso ser√° desinstalar apache2 para evitar posibles conflictos, y tras ello, instalar nginx.</p>

<p>Despu√©s de esto, podemos proceder con la configuraci√≥n del nuevo servidor web. Este servicio tambi√©n incluye un VirtualHost por defecto, pero a diferencia de Apache2, permite unificar en un solo archivo la configuraci√≥n tanto del VirtualHost que opera en el puerto 80 como el del puerto 443. Este archivo se encuentra en la ruta <code class="language-plaintext highlighter-rouge">/etc/nginx/sites-available/default</code>.</p>

<p>De forma que el fichero quedar√≠a de la siguiente forma:</p>

<div class="language-bash highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
</pre></td><td class="rouge-code"><pre>debian@https:~<span class="nv">$ </span><span class="nb">sudo cat</span> /etc/nginx/sites-enabled/default 
server <span class="o">{</span>
        listen 80 default_server<span class="p">;</span>
        listen <span class="o">[</span>::]:80 default_server<span class="p">;</span>

        server_name pablo.iesgn.org<span class="p">;</span>

        <span class="k">return </span>301 https://<span class="nv">$host$request_uri</span><span class="p">;</span>
<span class="o">}</span>

server <span class="o">{</span>
        listen 443 ssl default_server<span class="p">;</span>
        listen <span class="o">[</span>::]:443 ssl default_server<span class="p">;</span>

        ssl    on<span class="p">;</span>
        ssl_certificate    /etc/ssl/certs/pablomh.crt<span class="p">;</span>
        ssl_certificate_key    /etc/ssl/private/pablomh.key<span class="p">;</span>

        root /var/www/html/pablo.iesgn.org<span class="p">;</span>

        index index.html index.htm index.nginx-debian.html<span class="p">;</span>

        server_name pablo.iesgn.org<span class="p">;</span>

        location / <span class="o">{</span>
                try_files <span class="nv">$uri</span> <span class="nv">$uri</span>/ <span class="o">=</span>404<span class="p">;</span>
        <span class="o">}</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></div></div>

<p>Reiniciamos para que se efect√∫en los cambios:</p>

<div class="language-bash highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>debian@https:~<span class="nv">$ </span><span class="nb">sudo </span>systemctl reload nginx
</pre></td></tr></tbody></table></code></div></div>

<p>Tras ello, ya estar√° todo listo para acceder a <code class="language-plaintext highlighter-rouge">pablo.iesgn.org</code> desde el navegador.</p>

<p><a href="/assets/img/posts/certificado/nginx.png" class="popup img-link  shimmer"><img src="/assets/img/posts/certificado/nginx.png" alt="image" loading="lazy"></a></p>

<p>Y como podemos observar, el certificado de mi compa√±ero est√° funcionando correctamente.</p>

  </div>

  <div class="post-tail-wrapper text-muted">
    <!-- categories -->
    
      <div class="post-meta mb-3">
        <i class="far fa-folder-open fa-fw me-1"></i>
        
          <a href="/categories/seguridad/">Seguridad</a>,
          <a href="/categories/criptograf%C3%ADa/">Criptograf√≠a</a>
      </div>
    

    <!-- tags -->
    
      <div class="post-tags">
        <i class="fa fa-tags fa-fw me-1"></i>
        
          <a
            href="/tags/criptograf%C3%ADa/"
            class="post-tag no-text-decoration"
          >Criptograf√≠a</a>
        
      </div>
    

    <div
      class="
        post-tail-bottom
        d-flex justify-content-between align-items-center mt-5 pb-2
      "
    >
      <div class="license-wrapper">
        
          

          This post is licensed under 
        <a href="https://creativecommons.org/licenses/by/4.0/">
          CC BY 4.0
        </a>
         by the author.
        
      </div>

      <!-- Post sharing snippet -->

<div class="share-wrapper d-flex align-items-center">
  <span class="share-label text-muted">Share</span>
  <span class="share-icons">
    
    
    

    

      

      <a href="https://twitter.com/intent/tweet?text=Certificados%20digitales.%20HTTPS%20-%20Blog%20personal&url=%2Fposts%2Fcertificado%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Twitter" aria-label="Twitter">
        <i class="fa-fw fa-brands fa-square-x-twitter"></i>
      </a>
    

      

      <a href="https://www.facebook.com/sharer/sharer.php?title=Certificados%20digitales.%20HTTPS%20-%20Blog%20personal&u=%2Fposts%2Fcertificado%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Facebook" aria-label="Facebook">
        <i class="fa-fw fab fa-facebook-square"></i>
      </a>
    

      

      <a href="https://t.me/share/url?url=%2Fposts%2Fcertificado%2F&text=Certificados%20digitales.%20HTTPS%20-%20Blog%20personal" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Telegram" aria-label="Telegram">
        <i class="fa-fw fab fa-telegram"></i>
      </a>
    

    <button
      id="copy-link"
      aria-label="Copy link"
      class="btn small"
      data-bs-toggle="tooltip"
      data-bs-placement="top"
      title="Copy link"
      data-title-succeed="Link copied successfully!"
    >
      <i class="fa-fw fas fa-link pe-none fs-6"></i>
    </button>
  </span>
</div>

    </div>
    <!-- .post-tail-bottom -->
  </div>
  <!-- div.post-tail-wrapper -->
</article>


            
          </main>

          <!-- panel -->
          <aside aria-label="Panel" id="panel-wrapper" class="col-xl-3 ps-2 mb-5 text-muted">
            <div class="access">
              <!-- Get 5 last posted/updated posts -->














  <section id="access-lastmod">
    <h2 class="panel-heading">Recently Updated</h2>
    <ul class="content list-unstyled ps-0 pb-1 ms-1 mt-2">
      
        
        
        
        <li class="text-truncate lh-lg">
          <a href="/posts/systemd-boot/">Systemd-Boot</a>
        </li>
      
        
        
        
        <li class="text-truncate lh-lg">
          <a href="/posts/certificado/">Certificados digitales. HTTPS</a>
        </li>
      
        
        
        
        <li class="text-truncate lh-lg">
          <a href="/posts/systemd/">systemd/sshfs</a>
        </li>
      
        
        
        
        <li class="text-truncate lh-lg">
          <a href="/posts/integridad/">Integridad, firmas y autenticaci√≥n</a>
        </li>
      
        
        
        
        <li class="text-truncate lh-lg">
          <a href="/posts/openstack/">Escenario en OpenStack</a>
        </li>
      
    </ul>
  </section>
  <!-- #access-lastmod -->


              <!-- The trending tags list -->















  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
      
        
        

  
    
    
    
    
      
    
  
    
    
    
    
      
        
        

  
    
    
    
    
      
    
  
    
    
    
    
      
    
  
    
    
    
    
      
        
        

  
    
    
    
    
      
    
  
    
    
    
    
      
    
  
    
    
    
    
      
    
  
    
    
    
    
      
        
        

  
    
    
    
    
      
    
  
    
    
    
    
      
    
  
    
    
    
    
      
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
      
    
  
    
    
    
    
      
    
  
    
    
    
    
      
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
      
        
        



  <section>
    <h2 class="panel-heading">Trending Tags</h2>
    <div class="d-flex flex-wrap mt-3 mb-1 me-3">
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/criptograf%C3%ADa/">Criptograf√≠a</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/systemd/">Systemd</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/aplicaciones/">Aplicaciones</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/automatizaci%C3%B3n/">Automatizaci√≥n</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/cloud/">Cloud</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/compartici%C3%B3n-de-archivos/">Compartici√≥n de archivos</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/instalaci%C3%B3n/">Instalaci√≥n</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/virtualizaci%C3%B3n/">Virtualizaci√≥n</a>
      
    </div>
  </section>


            </div>

            
              
              



  <section id="toc-wrapper" class="d-none ps-0 pe-4">
    <h2 class="panel-heading ps-3 mb-2">Contents</h2>
    <nav id="toc"></nav>
  </section>


            
          </aside>
        </div>

        <div class="row">
          <!-- tail -->
          <div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 px-md-4">
            
              
              <!-- Recommend the other 3 posts according to the tags and categories of the current post. -->

<!-- The total size of related posts -->


<!-- An random integer that bigger than 0 -->


<!-- Equals to TAG_SCORE / {max_categories_hierarchy} -->















  

  

  

  

  

  

  

  

  

  

  

  

  

  
    










  <aside id="related-posts" aria-labelledby="related-label">
    <h3 class="mb-4" id="related-label">Further Reading</h3>
    <nav class="row row-cols-1 row-cols-md-2 row-cols-xl-3 g-4 mb-4">
      
        <article class="col">
          <a href="/posts/integridad/" class="post-preview card h-100">
            <div class="card-body">
              <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->




<time
  
  data-ts="1734629400"
  data-df="ll"
  
>
  Dec 19, 2024
</time>

              <h4 class="pt-0 my-2">Integridad, firmas y autenticaci√≥n</h4>
              <div class="text-muted">
                <p>En esta pr√°ctica trabajaremos con firmas electr√≥nicas, integridad de ficheros y autenticaci√≥n.</p>
              </div>
            </div>
          </a>
        </article>
      
        <article class="col">
          <a href="/posts/gpg-openssl/" class="post-preview card h-100">
            <div class="card-body">
              <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->




<time
  
  data-ts="1734034500"
  data-df="ll"
  
>
  Dec 12, 2024
</time>

              <h4 class="pt-0 my-2">Cifrado asim√©trico con gpg y openssl</h4>
              <div class="text-muted">
                <p>En esta pr√°ctica vamos a cifrar ficheros utilizando cifrado asim√©trico utilizando el programa gpg.</p>
              </div>
            </div>
          </a>
        </article>
      
    </nav>
  </aside>
  <!-- #related-posts -->


            
              
              <!-- Navigation buttons at the bottom of the post. -->

<nav class="post-navigation d-flex justify-content-between" aria-label="Post Navigation">
  
  

  
    <a
      href="/posts/integridad/"
      class="btn btn-outline-primary"
      aria-label="Older"
    >
      <p>Integridad, firmas y autenticaci√≥n</p>
    </a>
  

  
    <a
      href="/posts/systemd/"
      class="btn btn-outline-primary"
      aria-label="Newer"
    >
      <p>systemd/sshfs</p>
    </a>
  
</nav>

            
              
              <!-- The comments switcher -->


            

            <!-- The Footer -->

<footer
  aria-label="Site Info"
  class="
    d-flex flex-column justify-content-center text-muted
    flex-lg-row justify-content-lg-between align-items-lg-center pb-lg-3
  "
>
  <p>¬©
    <time>2025</time>

    
      <a href="https://github.com/PabloMartin19">Pablo Mart√≠n Hidalgo</a>.
    

    
      <span
        data-bs-toggle="tooltip"
        data-bs-placement="top"
        title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author."
      >Some rights reserved.</span>
    
  </p>

  <p>Using the <a
        data-bs-toggle="tooltip"
        data-bs-placement="top"
        title="v7.1.1"
        href="https://github.com/cotes2020/jekyll-theme-chirpy"
        target="_blank"
        rel="noopener"
      >Chirpy</a> theme for <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a>.
  </p>
</footer>

          </div>
        </div>

        <!-- The Search results -->

<div id="search-result-wrapper" class="d-flex justify-content-center d-none">
  <div class="col-11 content">
    <div id="search-hints">
      <!-- The trending tags list -->















  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
      
        
        

  
    
    
    
    
      
    
  
    
    
    
    
      
        
        

  
    
    
    
    
      
    
  
    
    
    
    
      
    
  
    
    
    
    
      
        
        

  
    
    
    
    
      
    
  
    
    
    
    
      
    
  
    
    
    
    
      
    
  
    
    
    
    
      
        
        

  
    
    
    
    
      
    
  
    
    
    
    
      
    
  
    
    
    
    
      
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
      
    
  
    
    
    
    
      
    
  
    
    
    
    
      
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
      
        
        



  <section>
    <h2 class="panel-heading">Trending Tags</h2>
    <div class="d-flex flex-wrap mt-3 mb-1 me-3">
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/criptograf%C3%ADa/">Criptograf√≠a</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/systemd/">Systemd</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/aplicaciones/">Aplicaciones</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/automatizaci%C3%B3n/">Automatizaci√≥n</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/cloud/">Cloud</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/compartici%C3%B3n-de-archivos/">Compartici√≥n de archivos</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/instalaci%C3%B3n/">Instalaci√≥n</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/virtualizaci%C3%B3n/">Virtualizaci√≥n</a>
      
    </div>
  </section>


    </div>
    <div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div>
  </div>
</div>

      </div>

      <aside aria-label="Scroll to Top">
        <button id="back-to-top" type="button" class="btn btn-lg btn-box-shadow">
          <i class="fas fa-angle-up"></i>
        </button>
      </aside>
    </div>

    <div id="mask"></div>

    
      <aside
  id="notification"
  class="toast"
  role="alert"
  aria-live="assertive"
  aria-atomic="true"
  data-bs-animation="true"
  data-bs-autohide="false"
>
  <div class="toast-header">
    <button
      type="button"
      class="btn-close ms-auto"
      data-bs-dismiss="toast"
      aria-label="Close"
    ></button>
  </div>
  <div class="toast-body text-center pt-0">
    <p class="px-2 mb-3">A new version of content is available.</p>
    <button type="button" class="btn btn-primary" aria-label="Update">
      Update
    </button>
  </div>
</aside>

    

    <!-- JavaScripts -->
    <!-- JS selector for site. -->

<!-- commons -->



<!-- layout specified -->


  

  
    <!-- image lazy-loading & popup & clipboard -->
    
  















  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  



  <script src="https://cdn.jsdelivr.net/combine/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js,npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.umd.min.js,npm/glightbox@3.3.0/dist/js/glightbox.min.js,npm/clipboard@2.0.11/dist/clipboard.min.js,npm/dayjs@1.11.13/dayjs.min.js,npm/dayjs@1.11.13/locale/en.js,npm/dayjs@1.11.13/plugin/relativeTime.js,npm/dayjs@1.11.13/plugin/localizedFormat.js,npm/tocbot@4.29.0/dist/tocbot.min.js"></script>







<script src="/assets/js/dist/post.min.js"></script>



<!-- Pageviews -->

  

  







    <!--
  Jekyll Simple Search loader
  See: <https://github.com/christian-fei/Simple-Jekyll-Search>
-->





<script>SimpleJekyllSearch({
    searchInput: document.getElementById('search-input'),
    resultsContainer: document.getElementById('search-results'),
    json: '/assets/js/data/search.json',
    searchResultTemplate: '  <article class="px-1 px-sm-2 px-lg-4 px-xl-0">    <header>      <h2><a href="{url}">{title}</a></h2>      <div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1">        {categories}        {tags}      </div>    </header>    <p>{snippet}</p>  </article>',
    noResultsText: '<p class="mt-5">Oops! No results found.</p>',
    templateMiddleware: function(prop, value, template) {
      if (prop === 'categories') {
        if (value === '') {
          return `${value}`;
        } else {
          return `<div class="me-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`;
        }
      }

      if (prop === 'tags') {
        if (value === '') {
          return `${value}`;
        } else {
          return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`;
        }
      }
    }
  });
</script>

  </body>
</html>

