<!doctype html>














<!-- `site.alt_lang` can specify a language different from the UI -->
<html lang="es" >
  <head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7">
  <meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta
    name="viewport"
    content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover"
  ><!-- Setup Open Graph image -->

  

  <!-- Begin Jekyll SEO tag v2.8.0 -->
<meta name="generator" content="Jekyll v4.3.4" />
<meta property="og:title" content="systemd/sshfs" />
<meta name="author" content="Pablo Martín Hidalgo" />
<meta property="og:locale" content="es" />
<meta name="description" content="Configuramos dos instancias en OpenStack para compartir un sistema de archivos remoto mediante SSHFS. Montamos el sistema manualmente en la máquina cliente y luego automatizamos el proceso usando un archivo /etc/fstab y unidades .mount y .automount de systemd, permitiendo montaje dinámico y desmontaje automático tras inactividad." />
<meta property="og:description" content="Configuramos dos instancias en OpenStack para compartir un sistema de archivos remoto mediante SSHFS. Montamos el sistema manualmente en la máquina cliente y luego automatizamos el proceso usando un archivo /etc/fstab y unidades .mount y .automount de systemd, permitiendo montaje dinámico y desmontaje automático tras inactividad." />
<link rel="canonical" href="/posts/systemd/" />
<meta property="og:url" content="/posts/systemd/" />
<meta property="og:site_name" content="Blog personal" />
<meta property="og:image" content="/assets/img/posts/systemd/systemd.png" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2024-12-19T18:30:00+01:00" />
<meta name="twitter:card" content="summary_large_image" />
<meta property="twitter:image" content="/assets/img/posts/systemd/systemd.png" />
<meta property="twitter:title" content="systemd/sshfs" />
<meta name="twitter:site" content="@Tagarnina10" />
<meta name="twitter:creator" content="@Tagarnina10" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Pablo Martín Hidalgo","url":"https://github.com/PabloMartin19/"},"dateModified":"2025-01-15T13:31:01+01:00","datePublished":"2024-12-19T18:30:00+01:00","description":"Configuramos dos instancias en OpenStack para compartir un sistema de archivos remoto mediante SSHFS. Montamos el sistema manualmente en la máquina cliente y luego automatizamos el proceso usando un archivo /etc/fstab y unidades .mount y .automount de systemd, permitiendo montaje dinámico y desmontaje automático tras inactividad.","headline":"systemd/sshfs","image":"/assets/img/posts/systemd/systemd.png","mainEntityOfPage":{"@type":"WebPage","@id":"/posts/systemd/"},"url":"/posts/systemd/"}</script>
<!-- End Jekyll SEO tag -->


  <title>systemd/sshfs | Blog personal
  </title>

  <!--
  The Favicons for Web, Android, Microsoft, and iOS (iPhone and iPad) Apps
  Generated by: https://realfavicongenerator.net/
-->



<link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png">

  <link rel="manifest" href="/assets/img/favicons/site.webmanifest">

<link rel="shortcut icon" href="/assets/img/favicons/favicon.ico">
<meta name="apple-mobile-web-app-title" content="Blog personal">
<meta name="application-name" content="Blog personal">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml">
<meta name="theme-color" content="#ffffff">


  <!-- Resource Hints -->
  
    
      
        <link rel="preconnect" href="https://fonts.googleapis.com" >
      
        <link rel="dns-prefetch" href="https://fonts.googleapis.com" >
      
    
      
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
      
        <link rel="dns-prefetch" href="https://fonts.gstatic.com" >
      
    
      
        <link rel="preconnect" href="https://cdn.jsdelivr.net" >
      
        <link rel="dns-prefetch" href="https://cdn.jsdelivr.net" >
      
    
  

  <!-- Bootstrap -->
  
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
  

  <!-- Theme style -->
  <link rel="stylesheet" href="/assets/css/jekyll-theme-chirpy.css">

  <!-- Web Font -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400&family=Source+Sans+Pro:wght@400;600;700;900&display=swap">

  <!-- Font Awesome Icons -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.6.0/css/all.min.css">

  <!-- 3rd-party Dependencies -->

  
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.29.0/dist/tocbot.min.css">
  

  
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.min.css">
  

  
    <!-- Image Popup -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/glightbox@3.3.0/dist/css/glightbox.min.css">
  

  <!-- JavaScript -->

  
    <!-- Switch the mode between dark and light. -->

<script type="text/javascript">
  class ModeToggle {
    static get MODE_KEY() {
      return 'mode';
    }
    static get MODE_ATTR() {
      return 'data-mode';
    }
    static get DARK_MODE() {
      return 'dark';
    }
    static get LIGHT_MODE() {
      return 'light';
    }
    static get ID() {
      return 'mode-toggle';
    }

    constructor() {
      let self = this;this.sysDarkPrefers.addEventListener('change', () => {
        if (self.hasMode) {
          self.clearMode();
        }
        self.notify();
      });

      if (!this.hasMode) {
        return;
      }

      if (this.isDarkMode) {
        this.setDark();
      } else {
        this.setLight();
      }
    }

    get sysDarkPrefers() {
      return window.matchMedia('(prefers-color-scheme: dark)');
    }

    get isPreferDark() {
      return this.sysDarkPrefers.matches;
    }

    get isDarkMode() {
      return this.mode === ModeToggle.DARK_MODE;
    }

    get hasMode() {
      return this.mode != null;
    }

    get mode() {
      return sessionStorage.getItem(ModeToggle.MODE_KEY);
    }get modeStatus() {
      if (this.hasMode) {
        return this.mode;
      } else {
        return this.isPreferDark ? ModeToggle.DARK_MODE : ModeToggle.LIGHT_MODE;
      }
    }

    setDark() {
      document.documentElement.setAttribute(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE);
      sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE);
    }

    setLight() {
      document.documentElement.setAttribute(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE);
      sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE);
    }

    clearMode() {
      document.documentElement.removeAttribute(ModeToggle.MODE_ATTR);
      sessionStorage.removeItem(ModeToggle.MODE_KEY);
    }notify() {
      window.postMessage(
        {
          direction: ModeToggle.ID,
          message: this.modeStatus
        },
        '*'
      );
    }

    flipMode() {
      if (this.hasMode) {
        this.clearMode();
      } else {
        if (this.isPreferDark) {
          this.setLight();
        } else {
          this.setDark();
        }
      }

      this.notify();
    }
  }

  const modeToggle = new ModeToggle();
</script>

  

  <!-- A placeholder to allow defining custom metadata -->

</head>


  <body>
    <!-- The Side Bar -->

<aside aria-label="Sidebar" id="sidebar" class="d-flex flex-column align-items-end">
  <header class="profile-wrapper">
    <a href="/" id="avatar" class="rounded-circle"><img src="/assets/img/avatar.png" width="112" height="112" alt="avatar" onerror="this.style.display='none'"></a>

    <a class="site-title d-block" href="/">Blog personal</a>
    <p class="site-subtitle fst-italic mb-0">Los mejores programas son aquellos que funcionan.</p>
  </header>
  <!-- .profile-wrapper -->

  <nav class="flex-column flex-grow-1 w-100 ps-0">
    <ul class="nav">
      <!-- home -->
      <li class="nav-item">
        <a href="/" class="nav-link">
          <i class="fa-fw fas fa-home"></i>
          <span>HOME</span>
        </a>
      </li>
      <!-- the real tabs -->
      
        <li class="nav-item">
          <a href="/categories/" class="nav-link">
            <i class="fa-fw fas fa-stream"></i>
            

            <span>CATEGORIES</span>
          </a>
        </li>
        <!-- .nav-item -->
      
        <li class="nav-item">
          <a href="/tags/" class="nav-link">
            <i class="fa-fw fas fa-tags"></i>
            

            <span>TAGS</span>
          </a>
        </li>
        <!-- .nav-item -->
      
        <li class="nav-item">
          <a href="/archives/" class="nav-link">
            <i class="fa-fw fas fa-archive"></i>
            

            <span>ARCHIVES</span>
          </a>
        </li>
        <!-- .nav-item -->
      
        <li class="nav-item">
          <a href="/about/" class="nav-link">
            <i class="fa-fw fas fa-info-circle"></i>
            

            <span>ABOUT</span>
          </a>
        </li>
        <!-- .nav-item -->
      
    </ul>
  </nav>

  <div class="sidebar-bottom d-flex flex-wrap  align-items-center w-100">
    
      <button type="button" class="btn btn-link nav-link" aria-label="Switch Mode" id="mode-toggle">
        <i class="fas fa-adjust"></i>
      </button>

      
        <span class="icon-border"></span>
      
    

    
      

      
        <a
          href="https://github.com/PabloMartin19"
          aria-label="github"
          

          
            target="_blank"
            
          

          

          
            rel="noopener noreferrer"
          
        >
          <i class="fab fa-github"></i>
        </a>
      
    
      

      
        <a
          href="https://twitter.com/Tagarnina10"
          aria-label="twitter"
          

          
            target="_blank"
            
          

          

          
            rel="noopener noreferrer"
          
        >
          <i class="fa-brands fa-x-twitter"></i>
        </a>
      
    
      

      
        <a
          href="javascript:location.href = 'mailto:' + ['pmartinhidalgo19','gmail.com'].join('@')"
          aria-label="email"
          

          

          

          
        >
          <i class="fas fa-envelope"></i>
        </a>
      
    
      

      
        <a
          href="https://www.linkedin.com/in/pablo-mart%C3%ADn-hidalgo/"
          aria-label="linkedin"
          

          
            target="_blank"
            
          

          

          
            rel="noopener noreferrer"
          
        >
          <i class="fab fa-linkedin"></i>
        </a>
      
    
  </div>
  <!-- .sidebar-bottom -->
</aside>
<!-- #sidebar -->


    <div id="main-wrapper" class="d-flex justify-content-center">
      <div class="container d-flex flex-column px-xxl-5">
        <!-- The Top Bar -->

<header id="topbar-wrapper" aria-label="Top Bar">
  <div
    id="topbar"
    class="d-flex align-items-center justify-content-between px-lg-3 h-100"
  >
    <nav id="breadcrumb" aria-label="Breadcrumb">
      

      
        
          
            <span>
              <a href="/">Home</a>
            </span>

          
        
          
        
          
            
              <span>systemd/sshfs</span>
            

          
        
      
    </nav>
    <!-- endof #breadcrumb -->

    <button type="button" id="sidebar-trigger" class="btn btn-link">
      <i class="fas fa-bars fa-fw"></i>
    </button>

    <div id="topbar-title">
      Post
    </div>

    <button type="button" id="search-trigger" class="btn btn-link">
      <i class="fas fa-search fa-fw"></i>
    </button>

    <search id="search" class="align-items-center ms-3 ms-lg-0">
      <i class="fas fa-search fa-fw"></i>
      <input
        class="form-control"
        id="search-input"
        type="search"
        aria-label="search"
        autocomplete="off"
        placeholder="Search..."
      >
    </search>
    <button type="button" class="btn btn-link text-decoration-none" id="search-cancel">Cancel</button>
  </div>
</header>


        <div class="row flex-grow-1">
          <main aria-label="Main Content" class="col-12 col-lg-11 col-xl-9 px-md-4">
            
              <!-- Refactor the HTML structure -->



<!--
  In order to allow a wide table to scroll horizontally,
  we suround the markdown table with `<div class="table-wrapper">` and `</div>`
-->



<!--
  Fixed kramdown code highlight rendering:
  https://github.com/penibelst/jekyll-compress-html/issues/101
  https://github.com/penibelst/jekyll-compress-html/issues/71#issuecomment-188144901
-->



<!-- Change the icon of checkbox -->



<!-- Handle images -->




  
  

  
    
      
      
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    
      

      
      
      

      
    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  

  


<!-- Add header for code snippets -->



<!-- Create heading anchors -->





  
  

  
    
    

    
      
        
        
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    

    
  

  
  

  

  
  

  

  
  

  




<!-- return -->




<article class="px-1">
  <header>
    <h1 data-toc-skip>systemd/sshfs</h1>
    
      <p class="post-desc fw-light mb-4">Configuramos dos instancias en OpenStack para compartir un sistema de archivos remoto mediante SSHFS. Montamos el sistema manualmente en la máquina cliente y luego automatizamos el proceso usando un archivo /etc/fstab y unidades .mount y .automount de systemd, permitiendo montaje dinámico y desmontaje automático tras inactividad.</p>
    

    <div class="post-meta text-muted">
      <!-- published date -->
      <span>
        Posted
        <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->




<time
  
  data-ts="1734629400"
  data-df="ll"
  
    data-bs-toggle="tooltip" data-bs-placement="bottom"
  
>
  Dec 19, 2024
</time>

      </span>

      <!-- lastmod date -->
      
        <span>
          Updated
          <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->




<time
  
  data-ts="1736944261"
  data-df="ll"
  
    data-bs-toggle="tooltip" data-bs-placement="bottom"
  
>
  Jan 15, 2025
</time>

        </span>
      

      
        
        
        

        

        <div class="mt-3 mb-3">
          <a href="/assets/img/posts/systemd/systemd.png" class="popup img-link preview-img shimmer"><img src="/assets/img/posts/systemd/systemd.png"  alt="Preview Image" width="1200" height="630"  loading="lazy"></a></div>
      

      <div class="d-flex justify-content-between">
        <!-- author(s) -->
        <span>
          

          By

          <em>
            
              
                <a href="https://github.com/PabloMartin19/">Pablo Martín Hidalgo</a>
                
              
            
          </em>
        </span>

        <div>
          <!-- pageviews -->
          

          <!-- read time -->
          <!-- Calculate the post's reading time, and display the word count in tooltip -->



<!-- words per minute -->










<!-- return element -->
<span
  class="readtime"
  data-bs-toggle="tooltip"
  data-bs-placement="bottom"
  title="2101 words"
>
  <em>11 min</em> read</span>

        </div>
      </div>
    </div>
  </header>

  <div class="content">
    <h2 id="enunciado"><span class="me-2">Enunciado</span><a href="#enunciado" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<p>Crea dos instancias en OpenStack, basadas en la distribución de tu elección, anexa un volumen de 2GB.</p>

<p>Una de las instancias hará de servidor, donde anexarás el volumen anterior. Deberás configurar sshfs en el escenario, de tal forma que el cliente pueda montar el sistema de archivos remoto usando sshfs y systemd. La validación del usuario se realizará mediante clave pública/privada.</p>

<ol>
  <li>
    <p>Monta manualmente el sistema de archivos remoto.</p>
  </li>
  <li>
    <p>Monta el sistema de archivos remoto de forma automática, mediante fichero /etc/fstab.</p>
  </li>
  <li>
    <p>Monta el sistema de archivos remoto de forma automática, mediante fichero unidad .mount</p>
  </li>
  <li>
    <p>Mediante fichero unidad .mount creado en el punto 3 y crea un fichero unidad de automontaje. unidad.automount, para que se monte automáticamente cuando detecte peticiones al sistema de archivos remoto y se desmonte automáticamente transcurrido un tiempo.</p>
  </li>
</ol>

<h2 id="ejercicio-1"><span class="me-2">Ejercicio 1</span><a href="#ejercicio-1" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<p>Comenzamos creando el escenario necesario para la práctica, en donde utilizaremos dos instancias de OpenStack. Una de ellas actuará como <strong>servidor</strong> y otra como <strong>cliente</strong>.</p>

<p><a href="/assets/img/posts/systemd/image1.png" class="popup img-link  shimmer"><img src="/assets/img/posts/systemd/image1.png" alt="image" loading="lazy"></a></p>

<p>Luego, anexamos un volumen de 2GB a la instancia del servidor:</p>

<p><a href="/assets/img/posts/systemd/image2.png" class="popup img-link  shimmer"><img src="/assets/img/posts/systemd/image2.png" alt="image" loading="lazy"></a></p>

<p>Seguidamente accedemos a las máquinas y generamos un par de claves en ellas:</p>

<div class="language-bash highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
</pre></td><td class="rouge-code"><pre>debian@systemd-server:~<span class="nv">$ </span>ssh-keygen
Generating public/private rsa key pair.
Enter file <span class="k">in </span>which to save the key <span class="o">(</span>/home/debian/.ssh/id_rsa<span class="o">)</span>: 
Enter passphrase <span class="o">(</span>empty <span class="k">for </span>no passphrase<span class="o">)</span>: 
Enter same passphrase again: 
Your identification has been saved <span class="k">in</span> /home/debian/.ssh/id_rsa
Your public key has been saved <span class="k">in</span> /home/debian/.ssh/id_rsa.pub
The key fingerprint is:
SHA256:nUOO1c1ppJFcV7DSmpBD3PUqjQkfIQttT7cf4k+F0Qw debian@systemd-server
The key<span class="s1">'s randomart image is:
+---[RSA 3072]----+
|        .oooo+E=+|
|         o+==Oo=o|
|         .Oo=.B+.|
|         * *.@oo.|
|        S = O +.o|
|           . o ..|
|              o  |
|               . |
|                 |
+----[SHA256]-----+
</span></pre></td></tr></tbody></table></code></div></div>

<div class="language-bash highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
</pre></td><td class="rouge-code"><pre>debian@systemd-client:~<span class="nv">$ </span>ssh-keygen 
Generating public/private rsa key pair.
Enter file <span class="k">in </span>which to save the key <span class="o">(</span>/home/debian/.ssh/id_rsa<span class="o">)</span>: 
Enter passphrase <span class="o">(</span>empty <span class="k">for </span>no passphrase<span class="o">)</span>: 
Enter same passphrase again: 
Your identification has been saved <span class="k">in</span> /home/debian/.ssh/id_rsa
Your public key has been saved <span class="k">in</span> /home/debian/.ssh/id_rsa.pub
The key fingerprint is:
SHA256:Mzy940zFH1GQxcXWT73pMETToeu9eVZ8yOP24PReETA debian@systemd-client
The key<span class="s1">'s randomart image is:
+---[RSA 3072]----+
|            .EoBO|
|             .*oB|
|            ...++|
|       . . . o.+o|
|        S . oo=+ |
|         + o..=o=|
|          +  o+o+|
|         + . ooo*|
|          o  ..*=|
+----[SHA256]-----+
</span></pre></td></tr></tbody></table></code></div></div>

<p>Comprobamos que el volumen que hemos anexado anteriormente aparezca en la instancia:</p>

<div class="language-bash highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="rouge-code"><pre>debian@systemd-server:~<span class="nv">$ </span>lsblk
NAME    MAJ:MIN RM  SIZE RO TYPE MOUNTPOINTS
vda     254:0    0   10G  0 disk 
├─vda1  254:1    0  9.9G  0 part /
├─vda14 254:14   0    3M  0 part 
└─vda15 254:15   0  124M  0 part /boot/efi
vdb     254:16   0    2G  0 disk 
</pre></td></tr></tbody></table></code></div></div>

<p>Como vemos el volumen ha sido añadido, por lo que ahora vamos a usar <code class="language-plaintext highlighter-rouge">fdisk</code> para crear una nueva partición en el volumen <code class="language-plaintext highlighter-rouge">vdb</code>:</p>

<div class="language-bash highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
</pre></td><td class="rouge-code"><pre>debian@systemd-server:~<span class="nv">$ </span><span class="nb">sudo </span>fdisk /dev/vdb

Welcome to fdisk <span class="o">(</span>util-linux 2.38.1<span class="o">)</span><span class="nb">.</span>
Changes will remain <span class="k">in </span>memory only, <span class="k">until </span>you decide to write them.
Be careful before using the write command.

The device contains <span class="s1">'ext4'</span> signature and it will be removed by a write command. See fdisk<span class="o">(</span>8<span class="o">)</span> man page and <span class="nt">--wipe</span> option <span class="k">for </span>more details.

Device does not contain a recognized partition table.
Created a new DOS <span class="o">(</span>MBR<span class="o">)</span> disklabel with disk identifier 0x954ead4c.

Command <span class="o">(</span>m <span class="k">for </span><span class="nb">help</span><span class="o">)</span>: n
Partition <span class="nb">type
   </span>p   primary <span class="o">(</span>0 primary, 0 extended, 4 free<span class="o">)</span>
   e   extended <span class="o">(</span>container <span class="k">for </span>logical partitions<span class="o">)</span>
Select <span class="o">(</span>default p<span class="o">)</span>: p
Partition number <span class="o">(</span>1-4, default 1<span class="o">)</span>: 1
First sector <span class="o">(</span>2048-4194303, default 2048<span class="o">)</span>: 
Last sector, +/-sectors or +/-size<span class="o">{</span>K,M,G,T,P<span class="o">}</span> <span class="o">(</span>2048-4194303, default 4194303<span class="o">)</span>: 

Created a new partition 1 of <span class="nb">type</span> <span class="s1">'Linux'</span> and of size 2 GiB.

Command <span class="o">(</span>m <span class="k">for </span><span class="nb">help</span><span class="o">)</span>: w
The partition table has been altered.
Calling ioctl<span class="o">()</span> to re-read partition table.
Syncing disks.
</pre></td></tr></tbody></table></code></div></div>

<p>Volvemos a comprobar las particiones:</p>

<div class="language-bash highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="rouge-code"><pre>debian@systemd-server:~<span class="nv">$ </span>lsblk
NAME    MAJ:MIN RM  SIZE RO TYPE MOUNTPOINTS
vda     254:0    0   10G  0 disk 
├─vda1  254:1    0  9.9G  0 part /
├─vda14 254:14   0    3M  0 part 
└─vda15 254:15   0  124M  0 part /boot/efi
vdb     254:16   0    2G  0 disk 
└─vdb1  254:17   0    2G  0 part
</pre></td></tr></tbody></table></code></div></div>

<p>Formateamos la partición que acabamos de crear con un sistema ext4:</p>

<div class="language-bash highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre></td><td class="rouge-code"><pre>debian@systemd-server:~<span class="nv">$ </span><span class="nb">sudo </span>mkfs.ext4 /dev/vdb1
mke2fs 1.47.0 <span class="o">(</span>5-Feb-2023<span class="o">)</span>
Discarding device blocks: <span class="k">done                            
</span>Creating filesystem with 524032 4k blocks and 131072 inodes
Filesystem UUID: b891fbd6-085d-4d5b-88c6-dc6093301465
Superblock backups stored on blocks: 
	32768, 98304, 163840, 229376, 294912

Allocating group tables: <span class="k">done                            
</span>Writing inode tables: <span class="k">done                            
</span>Creating journal <span class="o">(</span>8192 blocks<span class="o">)</span>: <span class="k">done
</span>Writing superblocks and filesystem accounting information: <span class="k">done</span>
</pre></td></tr></tbody></table></code></div></div>

<p>Luego creamos el punto de montaje de la particción y lo montamos en el directorio que hemos seleccionado:</p>

<div class="language-bash highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre>debian@systemd-server:~<span class="nv">$ </span><span class="nb">sudo mkdir</span> <span class="nt">-p</span> /mount
debian@systemd-server:~<span class="nv">$ </span><span class="nb">sudo </span>mount /dev/vdb1 /mount
</pre></td></tr></tbody></table></code></div></div>

<p>Volvemos a comprobar que la partición se ha montado correctamente en el directorio indicado:</p>

<div class="language-bash highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="rouge-code"><pre>debian@systemd-server:~<span class="nv">$ </span>lsblk
NAME    MAJ:MIN RM  SIZE RO TYPE MOUNTPOINTS
vda     254:0    0   10G  0 disk 
├─vda1  254:1    0  9.9G  0 part /
├─vda14 254:14   0    3M  0 part 
└─vda15 254:15   0  124M  0 part /boot/efi
vdb     254:16   0    2G  0 disk 
└─vdb1  254:17   0    2G  0 part /mount
</pre></td></tr></tbody></table></code></div></div>

<p>Creamos un fichero de prueba que usaremos para comprobar más tarde que el montaje ha funcionado correctamente:</p>

<div class="language-bash highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre>debian@systemd-server:/mount<span class="nv">$ </span><span class="nb">cat </span>kk.txt 
Buenas tardes por la mañana
debian@systemd-server:/mount<span class="nv">$ </span><span class="nb">ls</span> <span class="nt">-l</span>
total 20
<span class="nt">-rw-r--r--</span> 1 root root    29 Jan  9 07:51 kk.txt
drwx------ 2 root root 16384 Jan  9 07:48 lost+found
</pre></td></tr></tbody></table></code></div></div>

<p>Instalamos <strong>sshfs</strong> en ambas instancias:</p>

<div class="language-bash highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre>debian@systemd-server:~<span class="nv">$ </span><span class="nb">sudo </span>apt <span class="nb">install </span>sshfs
debian@systemd-client:~<span class="nv">$ </span><span class="nb">sudo </span>apt <span class="nb">install </span>sshfs
</pre></td></tr></tbody></table></code></div></div>

<p>Importante, necesitaremos tener la clave pública de la máquina cliente en el fichero <code class="language-plaintext highlighter-rouge">authorized_keys</code> de la máquina servidor para que el montaje funcione correctamente.</p>

<p>Por último, montamos el sistema de ficheros creado en la máquina servidor en la máquina cliente, utilizando <strong>sshfs</strong> con las siguientes instrucciones:</p>

<div class="language-bash highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre></td><td class="rouge-code"><pre>debian@systemd-client:~<span class="nv">$ </span><span class="nb">mkdir </span>montaje
debian@systemd-client:~<span class="nv">$ </span>sshfs debian@10.0.0.22:/mount /home/debian/montaje/ <span class="nt">-o</span> <span class="nv">IdentityFile</span><span class="o">=</span>/home/debian/.ssh/id_rsa
The authenticity of host <span class="s1">'10.0.0.22 (10.0.0.22)'</span> can<span class="s1">'t be established.
ED25519 key fingerprint is SHA256:jA8NMNDhdcLCYkll2HrP9UHnwsoIXcb/ZdbBlaNMvfo.
This key is not known by any other names.
Are you sure you want to continue connecting (yes/no/[fingerprint])? yes
debian@systemd-client:~$ ls -l montaje/
total 20
-rw-r--r-- 1 root root    29 Jan  9 07:51 kk.txt
drwx------ 1 root root 16384 Jan  9 07:48 lost+found
debian@systemd-client:~$ cat montaje/kk.txt 
Buenas tardes por la mañana
</span></pre></td></tr></tbody></table></code></div></div>

<p>Como vemos, el montaje ha funcionado a la perfección:</p>

<div class="language-bash highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre></td><td class="rouge-code"><pre>debian@systemd-client:~<span class="nv">$ </span><span class="nb">df</span> <span class="nt">-h</span>
Filesystem               Size  Used Avail Use% Mounted on
udev                     462M     0  462M   0% /dev
tmpfs                     97M  512K   96M   1% /run
/dev/vda1                9.7G  1.2G  8.1G  13% /
tmpfs                    481M     0  481M   0% /dev/shm
tmpfs                    5.0M     0  5.0M   0% /run/lock
/dev/vda15               124M   12M  113M  10% /boot/efi
tmpfs                     97M     0   97M   0% /run/user/1000
debian@10.0.0.22:/mount  2.0G   28K  1.9G   1% /home/debian/montaje
</pre></td></tr></tbody></table></code></div></div>

<h2 id="ejercicio-2"><span class="me-2">Ejercicio 2</span><a href="#ejercicio-2" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<p>Para la realización del montaje automático usaremos fstab, donde tendremos que añadir la siguiente línea al fichero <code class="language-plaintext highlighter-rouge">/etc/fstab</code> de la máquina cliente:</p>

<div class="language-bash highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>sshfs#debian@10.0.0.22:/mount /mnt/sshfs fuse defaults,_netdev,identityfile<span class="o">=</span>/home/debian/.ssh/id_rsa,allow_other 0 0
</pre></td></tr></tbody></table></code></div></div>

<p>Esta configuración permite montar un sistema de archivos remoto a través de SSH en el directorio local <code class="language-plaintext highlighter-rouge">/mnt/sshfs</code>. Para ello, se utiliza un usuario específico, una dirección IP, y se accede a la carpeta remota empleando el sistema de archivos FUSE. Además, el proceso de autenticación se realiza mediante una clave privada ubicada en <code class="language-plaintext highlighter-rouge">/home/debian/.ssh/id_rsa</code>.</p>

<p>En la máquina cliente, se crea previamente el punto de montaje especificado:</p>

<div class="language-bash highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre>debian@systemd-client:~<span class="nv">$ </span><span class="nb">sudo mkdir</span> <span class="nt">-p</span> /mnt/sshfs
debian@systemd-client:~<span class="nv">$ </span><span class="nb">sudo chown </span>debian:debian /mnt/sshfs
</pre></td></tr></tbody></table></code></div></div>

<p>Tras realizar un reinicio, comprobamos que el montaje se ha realizado correctamente:</p>

<div class="language-bash highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre></td><td class="rouge-code"><pre>debian@systemd-client:~<span class="nv">$ </span><span class="nb">df</span> <span class="nt">-h</span>
Filesystem               Size  Used Avail Use% Mounted on
udev                     462M     0  462M   0% /dev
tmpfs                     97M  500K   96M   1% /run
/dev/vda1                9.7G  1.2G  8.1G  13% /
tmpfs                    481M     0  481M   0% /dev/shm
tmpfs                    5.0M     0  5.0M   0% /run/lock
/dev/vda15               124M   12M  113M  10% /boot/efi
debian@10.0.0.22:/mount  2.0G   28K  1.9G   1% /mnt/sshfs
tmpfs                     97M     0   97M   0% /run/user/1000
</pre></td></tr></tbody></table></code></div></div>

<p>Comprobamos que podemos ver el contenido del fichero anteriormente montado:</p>

<div class="language-bash highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre>debian@systemd-client:~<span class="nv">$ </span><span class="nb">ls</span> <span class="nt">-l</span> /mnt/sshfs/
total 20
<span class="nt">-rw-r--r--</span> 1 root root    29 Jan  9 07:51 kk.txt
drwx------ 1 root root 16384 Jan  9 07:48 lost+found
debian@systemd-client:~<span class="nv">$ </span><span class="nb">cat</span> /mnt/sshfs/kk.txt 
Buenas tardes por la mañana
</pre></td></tr></tbody></table></code></div></div>

<h2 id="ejercicio-3"><span class="me-2">Ejercicio 3</span><a href="#ejercicio-3" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<p>En lugar de utilizar el archivo <code class="language-plaintext highlighter-rouge">/etc/fstab</code> para el montaje automático del sistema de archivos remoto, podemos emplear una unidad de systemd en la máquina cliente. Esto nos permitirá gestionar el montaje con systemd de forma eficiente, especificando los parámetros necesarios.</p>

<div class="language-bash highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="rouge-code"><pre>debian@systemd-client:~<span class="nv">$ </span><span class="nb">cat</span> /etc/systemd/system/home-debian-sshfs.mount
<span class="o">[</span>Unit]
<span class="nv">Description</span><span class="o">=</span>Montaje sistema de archivos remoto

<span class="o">[</span>Mount]
<span class="nv">What</span><span class="o">=</span>debian@10.0.0.22:/mount
<span class="nv">Where</span><span class="o">=</span>/home/debian/sshfs
<span class="nv">Type</span><span class="o">=</span>fuse.sshfs
<span class="nv">Options</span><span class="o">=</span>_netdev,IdentityFile<span class="o">=</span>/home/debian/.ssh/id_rsa,allow_other,default_permissions,reconnect
</pre></td></tr></tbody></table></code></div></div>

<p>Hacemos un reinicio para que los cambios se ejecuten:</p>

<div class="language-bash highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre></td><td class="rouge-code"><pre>debian@systemd-client:~<span class="nv">$ </span><span class="nb">sudo </span>systemctl daemon-reload
debian@systemd-client:~<span class="nv">$ </span><span class="nb">sudo </span>systemctl <span class="nb">enable </span>home-debian-sshfs.mount
The unit files have no installation config <span class="o">(</span><span class="nv">WantedBy</span><span class="o">=</span>, <span class="nv">RequiredBy</span><span class="o">=</span>, <span class="nv">Also</span><span class="o">=</span>,
<span class="nv">Alias</span><span class="o">=</span> settings <span class="k">in </span>the <span class="o">[</span>Install] section, and <span class="nv">DefaultInstance</span><span class="o">=</span> <span class="k">for </span>template
units<span class="o">)</span><span class="nb">.</span> This means they are not meant to be enabled using systemctl.
 
Possible reasons <span class="k">for </span>having this kind of units are:
• A unit may be statically enabled by being symlinked from another unit<span class="s1">'s
  .wants/ or .requires/ directory.
• A unit'</span>s purpose may be to act as a helper <span class="k">for </span>some other unit which has
  a requirement dependency on it.
• A unit may be started when needed via activation <span class="o">(</span>socket, path, timer,
  D-Bus, udev, scripted systemctl call, ...<span class="o">)</span><span class="nb">.</span>
• In <span class="k">case</span> of template units, the unit is meant to be enabled with some
  instance name specified.
debian@systemd-client:~<span class="nv">$ </span><span class="nb">sudo </span>systemctl start home-debian-sshfs.mount
</pre></td></tr></tbody></table></code></div></div>

<p>Comprobamos que el montaje haya salido correctamente:</p>

<div class="language-bash highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre></td><td class="rouge-code"><pre>debian@systemd-client:~<span class="nv">$ </span><span class="nb">df</span> <span class="nt">-h</span>
Filesystem               Size  Used Avail Use% Mounted on
udev                     462M     0  462M   0% /dev
tmpfs                     97M  500K   96M   1% /run
/dev/vda1                9.7G  1.2G  8.1G  13% /
tmpfs                    481M     0  481M   0% /dev/shm
tmpfs                    5.0M     0  5.0M   0% /run/lock
/dev/vda15               124M   12M  113M  10% /boot/efi
tmpfs                     97M     0   97M   0% /run/user/1000
debian@10.0.0.22:/mount  2.0G   28K  1.9G   1% /home/debian/sshfs
</pre></td></tr></tbody></table></code></div></div>

<p>Además, podemos ver el contenido:</p>

<div class="language-bash highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre>debian@systemd-client:~<span class="nv">$ </span><span class="nb">ls</span> <span class="nt">-l</span> sshfs/
total 20
<span class="nt">-rw-r--r--</span> 1 root root    29 Jan  9 07:51 kk.txt
drwx------ 1 root root 16384 Jan  9 07:48 lost+found
debian@systemd-client:~<span class="nv">$ </span><span class="nb">cat </span>sshfs/kk.txt 
Buenas tardes por la mañana
</pre></td></tr></tbody></table></code></div></div>

<h2 id="ejercicio-4"><span class="me-2">Ejercicio 4</span><a href="#ejercicio-4" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<p>Vamos a configurar una unidad de automontaje adicional que trabajará en conjunto con la unidad <code class="language-plaintext highlighter-rouge">.mount</code> creada anteriormente. En esta nueva unidad de automontaje, definiremos la unidad de montaje previamente configurada, el punto de montaje que utilizaremos y un tiempo de inactividad (en segundos) tras el cual se desmontará automáticamente si no hay actividad. Esto permitirá que el sistema gestione el montaje de forma dinámica.</p>

<div class="language-bash highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="rouge-code"><pre>debian@systemd-client:~<span class="nv">$ </span><span class="nb">cat</span> /etc/systemd/system/home-debian-sshfs.automount
<span class="o">[</span>Unit]
<span class="nv">Description</span><span class="o">=</span>Montaje sistema de archivos remoto
<span class="nv">Requires</span><span class="o">=</span>home-debian-sshfs.mount

<span class="o">[</span>Automount]
<span class="nv">Where</span><span class="o">=</span>/home/debian/sshfs
<span class="nv">TimeoutIdleSec</span><span class="o">=</span>1000
</pre></td></tr></tbody></table></code></div></div>

<p>Reiniciamos los cambios e iniciamos la unidad que acabamos de crear.</p>

<div class="language-bash highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre></td><td class="rouge-code"><pre>debian@systemd-client:~<span class="nv">$ </span><span class="nb">sudo </span>systemctl daemon-reload
debian@systemd-client:~<span class="nv">$ </span><span class="nb">sudo </span>systemctl <span class="nb">enable </span>home-debian-sshfs.automount
The unit files have no installation config <span class="o">(</span><span class="nv">WantedBy</span><span class="o">=</span>, <span class="nv">RequiredBy</span><span class="o">=</span>, <span class="nv">Also</span><span class="o">=</span>,
<span class="nv">Alias</span><span class="o">=</span> settings <span class="k">in </span>the <span class="o">[</span>Install] section, and <span class="nv">DefaultInstance</span><span class="o">=</span> <span class="k">for </span>template
units<span class="o">)</span><span class="nb">.</span> This means they are not meant to be enabled using systemctl.
 
Possible reasons <span class="k">for </span>having this kind of units are:
• A unit may be statically enabled by being symlinked from another unit<span class="s1">'s
  .wants/ or .requires/ directory.
• A unit'</span>s purpose may be to act as a helper <span class="k">for </span>some other unit which has
  a requirement dependency on it.
• A unit may be started when needed via activation <span class="o">(</span>socket, path, timer,
  D-Bus, udev, scripted systemctl call, ...<span class="o">)</span><span class="nb">.</span>
• In <span class="k">case</span> of template units, the unit is meant to be enabled with some
  instance name specified.
debian@systemd-client:~<span class="nv">$ </span><span class="nb">sudo </span>systemctl start home-debian-sshfs.automount
</pre></td></tr></tbody></table></code></div></div>

<p>Comprobamos de nuevo el montaje:</p>

<div class="language-bash highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre></td><td class="rouge-code"><pre>debian@systemd-client:~<span class="nv">$ </span><span class="nb">df</span> <span class="nt">-h</span>
Filesystem               Size  Used Avail Use% Mounted on
udev                     462M     0  462M   0% /dev
tmpfs                     97M  500K   96M   1% /run
/dev/vda1                9.7G  1.2G  8.1G  13% /
tmpfs                    481M     0  481M   0% /dev/shm
tmpfs                    5.0M     0  5.0M   0% /run/lock
/dev/vda15               124M   12M  113M  10% /boot/efi
debian@10.0.0.22:/mount  2.0G   28K  1.9G   1% /mnt/sshfs
tmpfs                     97M     0   97M   0% /run/user/1000
debian@10.0.0.22:/mount  2.0G   28K  1.9G   1% /home/debian/sshfs
</pre></td></tr></tbody></table></code></div></div>

<p>Y verificamos de nuevo que estén los ficheros:</p>

<div class="language-bash highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre>debian@systemd-client:~<span class="nv">$ </span><span class="nb">ls</span> <span class="nt">-l</span> sshfs/
total 20
<span class="nt">-rw-r--r--</span> 1 root root    29 Jan  9 07:51 kk.txt
drwx------ 1 root root 16384 Jan  9 07:48 lost+found
</pre></td></tr></tbody></table></code></div></div>

  </div>

  <div class="post-tail-wrapper text-muted">
    <!-- categories -->
    
      <div class="post-meta mb-3">
        <i class="far fa-folder-open fa-fw me-1"></i>
        
          <a href="/categories/sistemas/">Sistemas</a>,
          <a href="/categories/systemd/">Systemd</a>
      </div>
    

    <!-- tags -->
    
      <div class="post-tags">
        <i class="fa fa-tags fa-fw me-1"></i>
        
          <a
            href="/tags/systemd/"
            class="post-tag no-text-decoration"
          >Systemd</a>
        
      </div>
    

    <div
      class="
        post-tail-bottom
        d-flex justify-content-between align-items-center mt-5 pb-2
      "
    >
      <div class="license-wrapper">
        
          

          This post is licensed under 
        <a href="https://creativecommons.org/licenses/by/4.0/">
          CC BY 4.0
        </a>
         by the author.
        
      </div>

      <!-- Post sharing snippet -->

<div class="share-wrapper d-flex align-items-center">
  <span class="share-label text-muted">Share</span>
  <span class="share-icons">
    
    
    

    

      

      <a href="https://twitter.com/intent/tweet?text=systemd/sshfs%20-%20Blog%20personal&url=%2Fposts%2Fsystemd%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Twitter" aria-label="Twitter">
        <i class="fa-fw fa-brands fa-square-x-twitter"></i>
      </a>
    

      

      <a href="https://www.facebook.com/sharer/sharer.php?title=systemd/sshfs%20-%20Blog%20personal&u=%2Fposts%2Fsystemd%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Facebook" aria-label="Facebook">
        <i class="fa-fw fab fa-facebook-square"></i>
      </a>
    

      

      <a href="https://t.me/share/url?url=%2Fposts%2Fsystemd%2F&text=systemd/sshfs%20-%20Blog%20personal" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Telegram" aria-label="Telegram">
        <i class="fa-fw fab fa-telegram"></i>
      </a>
    

    <button
      id="copy-link"
      aria-label="Copy link"
      class="btn small"
      data-bs-toggle="tooltip"
      data-bs-placement="top"
      title="Copy link"
      data-title-succeed="Link copied successfully!"
    >
      <i class="fa-fw fas fa-link pe-none fs-6"></i>
    </button>
  </span>
</div>

    </div>
    <!-- .post-tail-bottom -->
  </div>
  <!-- div.post-tail-wrapper -->
</article>


            
          </main>

          <!-- panel -->
          <aside aria-label="Panel" id="panel-wrapper" class="col-xl-3 ps-2 mb-5 text-muted">
            <div class="access">
              <!-- Get 5 last posted/updated posts -->














  <section id="access-lastmod">
    <h2 class="panel-heading">Recently Updated</h2>
    <ul class="content list-unstyled ps-0 pb-1 ms-1 mt-2">
      
        
        
        
        <li class="text-truncate lh-lg">
          <a href="/posts/certificado/">Certificados digitales. HTTPS</a>
        </li>
      
        
        
        
        <li class="text-truncate lh-lg">
          <a href="/posts/integridad/">Integridad, firmas y autenticación</a>
        </li>
      
        
        
        
        <li class="text-truncate lh-lg">
          <a href="/posts/openstack/">Escenario en OpenStack</a>
        </li>
      
        
        
        
        <li class="text-truncate lh-lg">
          <a href="/posts/systemd-boot/">Systemd-Boot</a>
        </li>
      
        
        
        
        <li class="text-truncate lh-lg">
          <a href="/posts/systemd/">systemd/sshfs</a>
        </li>
      
    </ul>
  </section>
  <!-- #access-lastmod -->


              <!-- The trending tags list -->















  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
      
        
        

  
    
    
    
    
      
    
  
    
    
    
    
      
        
        

  
    
    
    
    
      
    
  
    
    
    
    
      
    
  
    
    
    
    
      
        
        

  
    
    
    
    
      
    
  
    
    
    
    
      
    
  
    
    
    
    
      
    
  
    
    
    
    
      
        
        

  
    
    
    
    
      
    
  
    
    
    
    
      
    
  
    
    
    
    
      
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
      
    
  
    
    
    
    
      
    
  
    
    
    
    
      
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
      
        
        



  <section>
    <h2 class="panel-heading">Trending Tags</h2>
    <div class="d-flex flex-wrap mt-3 mb-1 me-3">
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/criptograf%C3%ADa/">Criptografía</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/systemd/">Systemd</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/aplicaciones/">Aplicaciones</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/automatizaci%C3%B3n/">Automatización</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/cloud/">Cloud</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/compartici%C3%B3n-de-archivos/">Compartición de archivos</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/instalaci%C3%B3n/">Instalación</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/virtualizaci%C3%B3n/">Virtualización</a>
      
    </div>
  </section>


            </div>

            
              
              



  <section id="toc-wrapper" class="d-none ps-0 pe-4">
    <h2 class="panel-heading ps-3 mb-2">Contents</h2>
    <nav id="toc"></nav>
  </section>


            
          </aside>
        </div>

        <div class="row">
          <!-- tail -->
          <div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 px-md-4">
            
              
              <!-- Recommend the other 3 posts according to the tags and categories of the current post. -->

<!-- The total size of related posts -->


<!-- An random integer that bigger than 0 -->


<!-- Equals to TAG_SCORE / {max_categories_hierarchy} -->















  

  

  

  

  

  

  

  

  

  

  

  

  

  
    
  

  

  

  

  

  











  <aside id="related-posts" aria-labelledby="related-label">
    <h3 class="mb-4" id="related-label">Further Reading</h3>
    <nav class="row row-cols-1 row-cols-md-2 row-cols-xl-3 g-4 mb-4">
      
        <article class="col">
          <a href="/posts/systemd-boot/" class="post-preview card h-100">
            <div class="card-body">
              <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->




<time
  
  data-ts="1736861400"
  data-df="ll"
  
>
  Jan 14, 2025
</time>

              <h4 class="pt-0 my-2">Systemd-Boot</h4>
              <div class="text-muted">
                <p>En este post aprenderemos a instalar Debian 13 Trixie con systemd-boot en donde nos familiarizaremos con el sistema. Además, haremos un cambio de gestor de arranque iniciando por grub y finalmente ...</p>
              </div>
            </div>
          </a>
        </article>
      
        <article class="col">
          <a href="/posts/comandos-programacion/" class="post-preview card h-100">
            <div class="card-body">
              <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->




<time
  
  data-ts="1725300000"
  data-df="ll"
  
>
  Sep  2, 2024
</time>

              <h4 class="pt-0 my-2">Comandos para programación de tareas</h4>
              <div class="text-muted">
                <p>Explora los comandos esenciales para programar tareas en Linux. Aprende a automatizar procesos y optimizar tu flujo de trabajo en el sistema operativo, asegurando que las tareas críticas se realice...</p>
              </div>
            </div>
          </a>
        </article>
      
        <article class="col">
          <a href="/posts/dual-boot/" class="post-preview card h-100">
            <div class="card-body">
              <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->




<time
  
  data-ts="1725278940"
  data-df="ll"
  
>
  Sep  2, 2024
</time>

              <h4 class="pt-0 my-2">Creación de máquina virtual en VirtualBox con arranque dual</h4>
              <div class="text-muted">
                <p>Creación de una máquina virtual en VirtualBox con arranque dual que permita ejecutar dos sistemas operativos: Windows y Debian Bookworm.</p>
              </div>
            </div>
          </a>
        </article>
      
    </nav>
  </aside>
  <!-- #related-posts -->


            
              
              <!-- Navigation buttons at the bottom of the post. -->

<nav class="post-navigation d-flex justify-content-between" aria-label="Post Navigation">
  
  

  
    <a
      href="/posts/certificado/"
      class="btn btn-outline-primary"
      aria-label="Older"
    >
      <p>Certificados digitales. HTTPS</p>
    </a>
  

  
    <a
      href="/posts/systemd-boot/"
      class="btn btn-outline-primary"
      aria-label="Newer"
    >
      <p>Systemd-Boot</p>
    </a>
  
</nav>

            
              
              <!-- The comments switcher -->


            

            <!-- The Footer -->

<footer
  aria-label="Site Info"
  class="
    d-flex flex-column justify-content-center text-muted
    flex-lg-row justify-content-lg-between align-items-lg-center pb-lg-3
  "
>
  <p>©
    <time>2025</time>

    
      <a href="https://github.com/PabloMartin19">Pablo Martín Hidalgo</a>.
    

    
      <span
        data-bs-toggle="tooltip"
        data-bs-placement="top"
        title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author."
      >Some rights reserved.</span>
    
  </p>

  <p>Using the <a
        data-bs-toggle="tooltip"
        data-bs-placement="top"
        title="v7.1.1"
        href="https://github.com/cotes2020/jekyll-theme-chirpy"
        target="_blank"
        rel="noopener"
      >Chirpy</a> theme for <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a>.
  </p>
</footer>

          </div>
        </div>

        <!-- The Search results -->

<div id="search-result-wrapper" class="d-flex justify-content-center d-none">
  <div class="col-11 content">
    <div id="search-hints">
      <!-- The trending tags list -->















  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
      
        
        

  
    
    
    
    
      
    
  
    
    
    
    
      
        
        

  
    
    
    
    
      
    
  
    
    
    
    
      
    
  
    
    
    
    
      
        
        

  
    
    
    
    
      
    
  
    
    
    
    
      
    
  
    
    
    
    
      
    
  
    
    
    
    
      
        
        

  
    
    
    
    
      
    
  
    
    
    
    
      
    
  
    
    
    
    
      
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
      
    
  
    
    
    
    
      
    
  
    
    
    
    
      
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
      
        
        



  <section>
    <h2 class="panel-heading">Trending Tags</h2>
    <div class="d-flex flex-wrap mt-3 mb-1 me-3">
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/criptograf%C3%ADa/">Criptografía</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/systemd/">Systemd</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/aplicaciones/">Aplicaciones</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/automatizaci%C3%B3n/">Automatización</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/cloud/">Cloud</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/compartici%C3%B3n-de-archivos/">Compartición de archivos</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/instalaci%C3%B3n/">Instalación</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/virtualizaci%C3%B3n/">Virtualización</a>
      
    </div>
  </section>


    </div>
    <div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div>
  </div>
</div>

      </div>

      <aside aria-label="Scroll to Top">
        <button id="back-to-top" type="button" class="btn btn-lg btn-box-shadow">
          <i class="fas fa-angle-up"></i>
        </button>
      </aside>
    </div>

    <div id="mask"></div>

    
      <aside
  id="notification"
  class="toast"
  role="alert"
  aria-live="assertive"
  aria-atomic="true"
  data-bs-animation="true"
  data-bs-autohide="false"
>
  <div class="toast-header">
    <button
      type="button"
      class="btn-close ms-auto"
      data-bs-dismiss="toast"
      aria-label="Close"
    ></button>
  </div>
  <div class="toast-body text-center pt-0">
    <p class="px-2 mb-3">A new version of content is available.</p>
    <button type="button" class="btn btn-primary" aria-label="Update">
      Update
    </button>
  </div>
</aside>

    

    <!-- JavaScripts -->
    <!-- JS selector for site. -->

<!-- commons -->



<!-- layout specified -->


  

  
    <!-- image lazy-loading & popup & clipboard -->
    
  















  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  



  <script src="https://cdn.jsdelivr.net/combine/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js,npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.umd.min.js,npm/glightbox@3.3.0/dist/js/glightbox.min.js,npm/clipboard@2.0.11/dist/clipboard.min.js,npm/dayjs@1.11.13/dayjs.min.js,npm/dayjs@1.11.13/locale/en.js,npm/dayjs@1.11.13/plugin/relativeTime.js,npm/dayjs@1.11.13/plugin/localizedFormat.js,npm/tocbot@4.29.0/dist/tocbot.min.js"></script>







<script src="/assets/js/dist/post.min.js"></script>



<!-- Pageviews -->

  

  







    <!--
  Jekyll Simple Search loader
  See: <https://github.com/christian-fei/Simple-Jekyll-Search>
-->





<script>SimpleJekyllSearch({
    searchInput: document.getElementById('search-input'),
    resultsContainer: document.getElementById('search-results'),
    json: '/assets/js/data/search.json',
    searchResultTemplate: '  <article class="px-1 px-sm-2 px-lg-4 px-xl-0">    <header>      <h2><a href="{url}">{title}</a></h2>      <div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1">        {categories}        {tags}      </div>    </header>    <p>{snippet}</p>  </article>',
    noResultsText: '<p class="mt-5">Oops! No results found.</p>',
    templateMiddleware: function(prop, value, template) {
      if (prop === 'categories') {
        if (value === '') {
          return `${value}`;
        } else {
          return `<div class="me-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`;
        }
      }

      if (prop === 'tags') {
        if (value === '') {
          return `${value}`;
        } else {
          return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`;
        }
      }
    }
  });
</script>

  </body>
</html>

